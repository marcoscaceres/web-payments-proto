!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=33)}([function(e,t,n){"use strict";
/*! (c) Andrea Giammarchi (ISC) */const r=(e=>e.__esModule?e.default:e)(n(6)),{setup:i}=n(6),o=(e=>e.__esModule?e.default:e)(n(14)),a=(e=>e.__esModule?e.default:e)(n(13)),{content:s,weakly:c}=n(13),u=(e=>e.__esModule?e.default:e)(n(10)),l=(e=>e.__esModule?e.default:e)(n(9)),d=e=>u.bind(e),h=o.define;function f(e){return arguments.length<2?null==e?s("html"):"string"==typeof e?f.wire(null,e):"raw"in e?s("html")(e):"nodeType"in e?f.bind(e):c(e,"html"):("raw"in e?s("html"):f.wire).apply(null,arguments)}f.Component=r,f.bind=d,f.define=h,f.diff=l,f.hyper=f,f.wire=a,i(s),t.Component=r,t.bind=d,t.define=h,t.diff=l,t.hyper=f,t.wire=a,Object.defineProperty(t,"__esModule",{value:!0}).default=f},function(e,t,n){var r=n(23),i=n(22);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";const r=document.defaultView;t.G=r;t.ELEMENT_NODE=1;t.ATTRIBUTE_NODE=2;t.TEXT_NODE=3;t.COMMENT_NODE=8;t.DOCUMENT_FRAGMENT_NODE=11;t.VOID_ELEMENTS=/^area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr$/i;t.OWNER_SVG_ELEMENT="ownerSVGElement";t.SVG_NAMESPACE="http://www.w3.org/2000/svg";t.CONNECTED="connected";t.DISCONNECTED="disconnected";t.EXPANDO="_hyper: ";t.SHOULD_USE_TEXT_CONTENT=/^style|textarea$/i;const i="_hyper: "+(Math.random()*new Date|0)+";";t.UID=i;const o="\x3c!--"+i+"--\x3e";t.UIDC=o},function(e,t,n){"use strict";t.create=((e,t)=>r(e).createElement(t));const r=e=>e.ownerDocument||e;t.doc=r;t.fragment=(e=>r(e).createDocumentFragment());t.text=((e,t)=>r(e).createTextNode(t))},function(e,t,n){"use strict";const{attrName:r,attrSeeker:i}=n(12),{G:o,OWNER_SVG_ELEMENT:a,SVG_NAMESPACE:s,UID:c,UIDC:u}=n(2),{hasAppend:l,hasContent:d,hasDoomedCloneNode:h,hasImportNode:f}=n(32),{create:p,doc:m,fragment:g}=n(3),y=l?(e,t)=>{e.append.apply(e,t)}:(e,t)=>{const n=t.length;for(let r=0;r<n;r++)e.appendChild(t[r])};t.append=y;const v=new RegExp("("+r+"=)(['\"]?)"+u+"\\2","gi"),b=(e,t,n,r)=>"<"+t+n.replace(v,w)+r,w=(e,t,n)=>t+(n||'"')+c+(n||'"');t.createFragment=((e,t)=>(a in e?O:C)(e,t.replace(i,b)));const E=h?e=>{const t=e.cloneNode(),n=e.childNodes||[],r=n.length;for(let e=0;e<r;e++)t.appendChild(E(n[e]));return t}:e=>e.cloneNode(!0),_=f?(e,t)=>e.importNode(t,!0):(e,t)=>E(t);t.importNode=_;const x=[].slice;t.slice=x;t.unique=(e=>S(e));let S=e=>{if(e.propertyIsEnumerable("raw")||/Firefox\/(\d+)/.test((o.navigator||{}).userAgent)&&parseFloat(RegExp.$1)<55){const e={};S=(t=>{const n="_"+t.join(c);return e[n]||(e[n]=t)})}else S=(e=>e);return S(e)};const C=d?(e,t)=>{const n=p(e,"template");return n.innerHTML=t,n.content}:(e,t)=>{const n=p(e,"template"),r=g(e);if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(t)){const e=RegExp.$1;n.innerHTML="<table>"+t+"</table>",y(r,x.call(n.querySelectorAll(e)))}else n.innerHTML=t,y(r,x.call(n.childNodes));return r},O=d?(e,t)=>{const n=g(e),r=m(e).createElementNS(s,"svg");return r.innerHTML=t,y(n,x.call(r.childNodes)),n}:(e,t)=>{const n=g(e),r=p(e,"div");return r.innerHTML='<svg xmlns="'+s+'">'+t+"</svg>",y(n,x.call(r.firstChild.childNodes)),n}},function(e,t,n){"use strict";const{G:r,UID:i}=n(2);let o=r.Event;try{new o("Event")}catch(e){o=function(e){const t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}}t.Event=o;const a=r.Map||function(){const e=[],t=[];return{get:n=>t[e.indexOf(n)],set(n,r){t[e.push(n)-1]=r}}};t.Map=a;let s=0;const c=r.WeakMap||function(){const e=i+s++;return{get:t=>t[e],set(t,n){Object.defineProperty(t,e,{configurable:!0,value:n})}}};t.WeakMap=c;const u=r.WeakSet||function(){const e=new c;return{add(t){e.set(t,!0)},has:t=>!0===e.get(t)}};t.WeakSet=u;const l=Array.isArray||(e=>t=>"[object Array]"===e.call(t))({}.toString);t.isArray=l;const d=i.trim||function(){return this.replace(/^\s+|\s+$/g,"")};t.trim=d},function(e,t,n){"use strict";const{Map:r,WeakMap:i}=n(5);function o(){return this}Object.defineProperty(t,"__esModule",{value:!0}).default=o,t.setup=function(e){const t=new i,n=Object.create,s=(e,t)=>{const n={w:null,p:null};return t.set(e,n),n};Object.defineProperties(o,{for:{configurable:!0,value(e,o){return((e,t,r,o)=>{const a=t.get(e)||s(e,t);switch(typeof o){case"object":case"function":const t=a.w||(a.w=new i);return t.get(o)||((e,t,n)=>(e.set(t,n),n))(t,o,new e(r));default:const s=a.p||(a.p=n(null));return s[o]||(s[o]=new e(r))}})(this,t.get(e)||(e=>{const n=new r;return t.set(e,n),n})(e),e,null==o?"default":o)}}}),Object.defineProperties(o.prototype,{handleEvent:{value(e){const t=e.currentTarget;this["getAttribute"in t&&t.getAttribute("data-call")||"on"+e.type](e)}},html:a("html",e),svg:a("svg",e),state:a("state",function(){return this.defaultState}),defaultState:{get:()=>({})},setState:{value(e,t){const n=this.state,r="function"==typeof e?e.call(this,n):e;for(const e in r)n[e]=r[e];return!1!==t&&this.render(),this}}})};const a=(e,t)=>{const n="_"+e+"$";return{get(){return this[n]||(this[e]=t.call(this,e))},set(e){Object.defineProperty(this,n,{configurable:!0,value:e})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new WeakMap,i=new WeakMap;function o(e){const t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function a(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(t);for(let e=0;e<n.length;++e){const t=n[e];t in this||Object.defineProperty(this,t,s(t))}}function s(e){return{get(){return o(this).event[e]},set(t){o(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e){return{value(){const t=o(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function u(e){if(null==e||e===Object.prototype)return a;let t=i.get(e);return null==t&&(t=function(e,t){const n=Object.keys(t);if(0===n.length)return e;function r(t,n){e.call(this,t,n)}r.prototype=Object.create(e.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let i=0;i<n.length;++i){const o=n[i];if(!(o in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,o).value;Object.defineProperty(r.prototype,o,e?c(o):s(o))}}return r}(u(Object.getPrototypeOf(e)),e),i.set(e,t)),t}function l(e){return o(e).stopped}function d(e,t){o(e).passiveListener=t}a.prototype={get type(){return o(this).event.type},get target(){return o(this).eventTarget},get currentTarget(){return o(this).currentTarget},composedPath(){const e=o(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return o(this).eventPhase},stopPropagation(){const e=o(this);"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=o(this);e.stopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(o(this).event.bubbles)},get cancelable(){return Boolean(o(this).event.cancelable)},preventDefault(){const e=o(this);null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):console.warn("Event#preventDefault() was called from a passive listener:",e.passiveListener)},get defaultPrevented(){return o(this).canceled},get composed(){return Boolean(o(this).event.composed)},get timeStamp(){return o(this).timeStamp}},Object.defineProperty(a.prototype,"constructor",{value:a,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(a.prototype,window.Event.prototype),i.set(window.Event.prototype,a));const h=new WeakMap,f=3;function p(e){return null!==e&&"object"==typeof e}function m(e){const t=h.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function g(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=m(this).get(e);for(;null!=t;){if(t.listenerType===f)return t.listener;t=t.next}return null},set(t){"function"==typeof t||p(t)||(t=null);const n=m(this);let r=null,i=n.get(e);for(;null!=i;)i.listenerType===f?null!==r?r.next=i.next:null!==i.next?n.set(e,i.next):n.delete(e):r=i,i=i.next;if(null!==t){const i={listener:t,listenerType:f,passive:!1,once:!1,next:null};null===r?n.set(e,i):r.next=i}},configurable:!0,enumerable:!0}}(t))}function y(e){function t(){v.call(this)}t.prototype=Object.create(v.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)g(t.prototype,e[n]);return t}function v(){if(!(this instanceof v)){if(1===arguments.length&&Array.isArray(arguments[0]))return y(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return y(e)}throw new TypeError("Cannot call a class as a function")}h.set(this,new Map)}v.prototype={addEventListener(e,t,n){if(null==t)return!1;if("function"!=typeof t&&!p(t))throw new TypeError("'listener' should be a function or an object.");const r=m(this),i=p(n),o=(i?Boolean(n.capture):Boolean(n))?1:2,a={listener:t,listenerType:o,passive:i&&Boolean(n.passive),once:i&&Boolean(n.once),next:null};let s=r.get(e);if(void 0===s)return r.set(e,a),!0;let c=null;for(;null!=s;){if(s.listener===t&&s.listenerType===o)return!1;c=s,s=s.next}return c.next=a,!0},removeEventListener(e,t,n){if(null==t)return!1;const r=m(this),i=(p(n)?Boolean(n.capture):Boolean(n))?1:2;let o=null,a=r.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===i)return null!==o?o.next=a.next:null!==a.next?r.set(e,a.next):r.delete(e),!0;o=a,a=a.next}return!1},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=m(this),n=e.type;let r=t.get(n);if(null==r)return!0;const i=function(e,t){return new(u(Object.getPrototypeOf(t)))(e,t)}(this,e);let a=null;for(;null!=r&&(r.once?null!==a?a.next=r.next:null!==r.next?t.set(n,r.next):t.delete(n):a=r,d(i,r.passive?r.listener:null),"function"==typeof r.listener?r.listener.call(this,i):r.listenerType!==f&&"function"==typeof r.listener.handleEvent&&r.listener.handleEvent(i),!l(i));)r=r.next;return d(i,null),function(e,t){o(e).eventPhase=t}(i,0),function(e,t){o(e).currentTarget=t}(i,null),!i.defaultPrevented}},Object.defineProperty(v.prototype,"constructor",{value:v,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(v.prototype,window.EventTarget.prototype),t.defineEventAttribute=g,t.EventTarget=v,t.default=v,e.exports=v,e.exports.EventTarget=e.exports.default=v,e.exports.defineEventAttribute=g},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";
/*! (c) 2017 Andrea Giammarchi (ISC) */const r=e=>e,i=(e,t,n)=>{const r=e.ownerDocument.createRange();r.setStartBefore(t),r.setEndAfter(n),r.deleteContents()};Object.defineProperty(t,"__esModule",{value:!0}).default=((e,t,n,o,a)=>{const s=o||r,c=null==a?null:s(a,0);let u=0,l=0,d=t.length-1,h=t[0],f=t[d],p=n.length-1,m=n[0],g=n[p];for(;u<=d&&l<=p;)if(null==h)h=t[++u];else if(null==f)f=t[--d];else if(null==m)m=n[++l];else if(null==g)g=n[--p];else if(h==m)h=t[++u],m=n[++l];else if(f==g)f=t[--d],g=n[--p];else if(h==g)e.insertBefore(s(h,1),s(f,-0).nextSibling),h=t[++u],g=n[--p];else if(f==m)e.insertBefore(s(f,1),s(h,0)),f=t[--d],m=n[++l];else{let r=t.indexOf(m);if(r<0)e.insertBefore(s(m,1),s(h,0)),m=n[++l];else{let o=r,a=l;for(;o<=d&&a<=p&&t[o]===n[a];)o++,a++;if(1<o-r)--r===u?e.removeChild(s(h,-1)):i(e,s(h,-1),s(t[r],-1)),u=o,l=a,h=t[o],m=n[a];else{const i=t[r];t[r]=null,e.insertBefore(s(i,1),s(h,0)),m=n[++l]}}}if(u<=d||l<=p)if(u>d){const t=n[p+1],r=null==t?c:s(t,0);if(l===p)e.insertBefore(s(n[l],1),r);else{const t=e.ownerDocument.createDocumentFragment();for(;l<=p;)t.appendChild(s(n[l++],1));e.insertBefore(t,r)}}else null==t[u]&&u++,u===d?e.removeChild(s(t[u],-1)):i(e,s(t[u],-1),s(t[d],-1));return n})},function(e,t,n){"use strict";const{Map:r,WeakMap:i}=n(5),{UIDC:o,VOID_ELEMENTS:a}=n(2),s=(e=>e.__esModule?e.default:e)(n(31)),{createFragment:c,importNode:u,unique:l}=n(4),{selfClosing:d}=n(12),h=new i,f=new r;function p(){const e=arguments.length;for(let t=1;t<e;t++)this[t-1](arguments[t])}const m=d,g=(e,t,n)=>a.test(t)?e:"<"+t+n+"></"+t+">";Object.defineProperty(t,"__esModule",{value:!0}).default=function(e){const t=h.get(this);return t&&t.template===l(e)?p.apply(t.updates,arguments):function(e){e=l(e);const t=f.get(e)||function(e){const t=[],n=e.join(o).replace(m,g),r=c(this,n);s.find(r,t,e.slice());const i={fragment:r,paths:t};return f.set(e,i),i}.call(this,e),n=u(this.ownerDocument,t.fragment),r=s.create(n,t.paths);h.set(this,{template:e,updates:r}),p.apply(r,arguments),this.textContent="",this.appendChild(n)}.apply(this,arguments),this}},function(e,t,n){"use strict";const{append:r}=n(4),{doc:i,fragment:o}=n(3);function a(e){this.childNodes=e,this.length=e.length,this.first=e[0],this.last=e[this.length-1]}Object.defineProperty(t,"__esModule",{value:!0}).default=a,a.prototype.insert=function(){const e=o(this.first);return r(e,this.childNodes),e},a.prototype.remove=function(){const e=this.first,t=this.last;if(2===this.length)t.parentNode.removeChild(t);else{const n=i(e).createRange();n.setStartBefore(this.childNodes[1]),n.setEndAfter(t),n.deleteContents()}return e}},function(e,t,n){"use strict";const r=" \\f\\n\\r\\t",i="[ "+r+"]+[^  \\f\\n\\r\\t\\/>\"'=]+",o="<([A-Za-z]+[A-Za-z0-9:_-]*)((?:",a="(?:=(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|[^  \\f\\n\\r\\t\\/>\"'=]+))?)",s=new RegExp(o+i+a+"+)([ "+r+"]*/?>)","g"),c=new RegExp(o+i+a+"*)([ "+r+"]*/>)","g");t.attrName=i,t.attrSeeker=s,t.selfClosing=c},function(e,t,n){"use strict";const{ELEMENT_NODE:r,SVG_NAMESPACE:i}=n(2),{WeakMap:o,trim:a}=n(5),{fragment:s}=n(3),{append:c,slice:u,unique:l}=n(4),d=(e=>e.__esModule?e.default:e)(n(11)),h=(e=>e.__esModule?e.default:e)(n(10)),f=new o,p=e=>{let t,n,r,o,a;return function(d){d=l(d);let f=o!==d;return f&&(o=d,r=s(document),n="svg"===e?document.createElementNS(i,"svg"):r,a=h.bind(n)),a.apply(null,arguments),f&&("svg"===e&&c(r,u.call(n.childNodes)),t=g(r)),t}},m=(e,t)=>{const n=t.indexOf(":");let r=f.get(e),i=t;return-1<n&&(i=t.slice(n+1),t=t.slice(0,n)||"html"),r||f.set(e,r={}),r[i]||(r[i]=p(t))},g=e=>{const t=e.childNodes,n=t.length,i=[];for(let e=0;e<n;e++){let n=t[e];n.nodeType!==r&&0===a.call(n.textContent).length||i.push(n)}return 1===i.length?i[0]:new d(i)};t.content=p,t.weakly=m,Object.defineProperty(t,"__esModule",{value:!0}).default=((e,t)=>null==e?p(t||"html"):m(e,t||"html"))},function(e,t,n){"use strict";const r={},i=[],o=r.hasOwnProperty;let a=0;Object.defineProperty(t,"__esModule",{value:!0}).default={define:(e,t)=>{e in r||(a=i.push(e)),r[e]=t},invoke:(e,t)=>{for(let n=0;n<a;n++){let a=i[n];if(o.call(e,a))return r[a](e[a],t)}}}},function(e,t,n){var r;!function(){var i=window.CustomEvent;function o(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function c(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function u(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(t),t=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,i)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}i&&"object"!=typeof i||((i=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),u.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new i("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var l={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var i=0;i<r.length;++i){var o=r[i],a=null;try{a=document.querySelectorAll(o.selectorText)}catch(e){}if(a&&s(a,e)){var c=o.style.getPropertyValue("top"),u=o.style.getPropertyValue("bottom");if(c&&"auto"!==c||u&&"auto"!==u)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!l.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new u(e)},registerDialog:function(e){e.showModal||l.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))}};if(l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=o(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new i("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},l.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},l.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},l.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,void 0===window.HTMLDialogElement){var d=document.createElement("form");if(d.setAttribute("method","dialog"),"dialog"!==d.method){var h=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(h){var f=h.get;h.get=function(){return c(this)?"dialog":f.call(this)};var p=h.set;h.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):p.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",h)}}document.addEventListener("click",function(e){if(l.formSubmitter=null,l.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&c(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;l.useValue=e.offsetX+","+e.offsetY}o(t)&&(l.formSubmitter=t)}}},!1);var m=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!c(this))return m.call(this);var e=o(this);e&&e.close()},document.addEventListener("submit",function(e){var t=e.target;if(c(t)){e.preventDefault();var n=o(t);if(n){var r=l.formSubmitter;r&&r.form===t?n.close(l.useValue||r.value):n.close(),l.formSubmitter=null}}},!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,"amd"in n(18)?void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r):"object"==typeof e&&"object"==typeof e.exports?e.exports=l:window.dialogPolyfill=l}()},function(e,t,n){"use strict";(function(e,n){var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:e;function a(e,t){return"object"!=typeof t?e:(r(t).forEach(function(n){e[n]=t[n]}),e)}var s=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(s(e))),r(t).forEach(function(n){h(e,n,t[n])})}var d=Object.defineProperty;function h(e,t,n,r){d(e,t,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor;var m=[].slice;function g(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function b(e){o.setImmediate?n(e):setTimeout(e,0)}function w(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function E(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function _(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function x(e,t){if(u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=x(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:x(s,t.substr(a+1))}}function S(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)S(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var c=e[a];c||(c=e[a]={}),S(c,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function C(e){var t={};for(var n in e)u(e,n)&&(t[n]=e[n]);return t}var O=[].concat;function M(e){return O.apply([],e)}var k="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(M([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return o[e]}).map(function(e){return o[e]});function T(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(T(e[n]))}else if(k.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)u(e,o)&&(t[o]=T(e[o]));return t}function N(e,t,n,i){return n=n||{},i=i||"",r(e).forEach(function(r){if(u(t,r)){var o=e[r],a=t[r];"object"==typeof o&&"object"==typeof a&&o&&a&&""+o.constructor==""+a.constructor?N(o,a,n,i+r+"."):o!==a&&(n[i+r]=t[r])}else n[i+r]=void 0}),r(t).forEach(function(r){u(e,r)||(n[i+r]=t[r])}),n}var A="undefined"!=typeof Symbol&&Symbol.iterator,P=A?function(e){var t;return null!=e&&(t=e[A])&&t.apply(e)}:function(){return null},D={};function j(e){var t,n,r,o;if(1===arguments.length){if(i(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(o=P(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var I="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function L(e,t){I=e,$=t}var $=function(){return!0},B=!new Error("").stack;function R(){if(B)try{throw R.arguments,new Error}catch(e){return e}return new Error}function q(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter($).map(function(e){return"\n"+e}).join("")):""}var F=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],U=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(F),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function V(e,t){this._e=R(),this.name=e,this.message=t}function W(e,t,n,r){this._e=R(),this.failures=t,this.failedKeys=r,this.successCount=n}function G(e,t){this._e=R(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}(e,t)}f(V).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(W).from(V),f(G).from(V);var z=U.reduce(function(e,t){return e[t]=t+"Error",e},{}),H=V,Y=U.reduce(function(e,t){var n=t+"Error";function r(e,r){this._e=R(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=K[t]||n,this.inner=null)}return f(r).from(H),e[t]=r,e},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Z=F.reduce(function(e,t){return e[t+"Error"]=Y[t],e},{});var J=U.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Y[t]),e},{});function Q(){}function X(e){return e}function ee(e,t){return null==e||e===X?t:function(n){return t(e(n))}}function te(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ne(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?te(r,this.onsuccess):r),i&&(this.onerror=this.onerror?te(i,this.onerror):i),void 0!==o?o:n}}function re(e,t){return e===Q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?te(n,this.onsuccess):n),r&&(this.onerror=this.onerror?te(r,this.onerror):r)}}function ie(e,t){return e===Q?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?te(i,this.onsuccess):i),o&&(this.onerror=this.onerror?te(o,this.onerror):o),void 0===r?void 0===s?void 0:s:a(r,s)}}function oe(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ae(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}J.ModifyError=W,J.DexieError=V,J.BulkError=G;var se={},ce=100,ue=7,le=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=o.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),de=le[0],he=le[1],fe=le[2],pe=he&&he.then,me=de&&de.constructor,ge=le[3],ye=!!fe,ve=!1,be=fe?function(){fe.then(qe)}:o.setImmediate?n.bind(null,qe):o.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){qe(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(qe,0)},we=function(e,t){Te.push([e,t]),_e&&(be(),_e=!1)},Ee=!0,_e=!0,xe=[],Se=[],Ce=null,Oe=X,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ut,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ut(e[0],e[1])}catch(e){}})}},ke=Me,Te=[],Ne=0,Ae=[];function Pe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var t=this._PSD=ke;if(I&&(this._stackHolder=R(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ie(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Fe();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof Pe?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Le(t)),r&&Ue()}},Ie.bind(null,t))}catch(e){Ie(t,e)}}(this,e)}var De={get:function(){var e=ke,t=Ze;function n(n,r){var i=this,o=!e.global&&(e!==ke||t!==Ze);o&&et();var a=new Pe(function(t,a){$e(i,new je(at(n,e,o),at(r,e,o),t,a,e))});return I&&Re(a,this),a}return n.prototype=se,n},set:function(e){h(this,"then",e&&e.prototype===se?De:{get:function(){return e},set:De.set})}};function je(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ie(e,t){if(Se.push(t),null===e._state){var n=e._lib&&Fe();t=Oe(t),e._state=!1,e._value=t,I&&null!==t&&"object"==typeof t&&!t._promise&&_(function(){var n=function e(t,n){var r;return p(t,n)||(r=s(t))&&e(r,n)}(t,"stack");t._promise=e,h(t,"stack",{get:function(){return ve?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),function(e){xe.some(function(t){return t._value===e._value})||xe.push(e)}(e),Le(e),n&&Ue()}}function Le(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$e(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Ne&&(++Ne,we(function(){0==--Ne&&Ke()},[]))}function $e(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ne,we(Be,[n,e,t])}else e._listeners.push(t)}function Be(e,t,n){try{Ce=t;var r,i=t._value;t._state?r=e(i):(Se.length&&(Se=[]),r=e(i),-1===Se.indexOf(i)&&function(e){var t=xe.length;for(;t;)if(xe[--t]._value===e._value)return void xe.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ce=null,0==--Ne&&Ke(),--n.psd.ref||n.psd.finalize()}}function Re(e,t){var n=t?t._numPrev+1:0;n<ce&&(e._prev=t,e._numPrev=n)}function qe(){Fe()&&Ue()}function Fe(){var e=Ee;return Ee=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Te.length>0;)for(e=Te,Te=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Te.length>0);Ee=!0,_e=!0}function Ke(){var e=xe;xe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Pe(se,!1,e)}function We(e,t){var n=ke;return function(){var r=Fe(),i=ke;try{return rt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{rt(i,!1),r&&Ue()}}}l(Pe.prototype,{then:De,_then:function(e,t){$e(this,new je(null,null,e,t,ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):Ve(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Ve(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ve(t)})},stack:{get:function(){if(this._stack)return this._stack;try{ve=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var o,a,s=t._value;null!=s?(o=s.name||"Error",a=s.message||s,i=q(s,0)):(o=s,a=""),n.push(o+(a?": "+a:"")+i)}I&&((i=q(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ve=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Pe(function(r,i){var o=setTimeout(function(){return i(new Y.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Pe.prototype,Symbol.toStringTag,"Promise"),Me.env=it(),l(Pe,{all:function(){var e=j.apply(null,arguments).map(tt);return new Pe(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return Pe.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Pe)return e;if(e&&"function"==typeof e.then)return new Pe(function(t,n){e.then(t,n)});var t=new Pe(se,!0,e);return Re(t,Ce),t},reject:Ve,race:function(){var e=j.apply(null,arguments).map(tt);return new Pe(function(t,n){e.map(function(e){return Pe.resolve(e).then(t,n)})})},PSD:{get:function(){return ke},set:function(e){return ke=e}},newPSD:Qe,usePSD:ot,scheduler:{get:function(){return we},set:function(e){we=e}},rejectionMapper:{get:function(){return Oe},set:function(e){Oe=e}},follow:function(e,t){return new Pe(function(n,r){return Qe(function(t,n){var r=ke;r.unhandleds=[],r.onunhandled=n,r.finalize=te(function(){var e=this;!function(e){Ae.push(function t(){e();Ae.splice(Ae.indexOf(t),1)}),++Ne,we(function(){0==--Ne&&Ke()},[])}(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var Ge={awaits:0,echoes:0,id:0},ze=0,He=[],Ye=0,Ze=0,Je=0;function Qe(e,t,n,r){var i=ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Je;var s=Me.env;o.env=ye?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,resolve:Pe.resolve,reject:Pe.reject,nthen:st(s.nthen,o),gthen:st(s.gthen,o)}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=ot(o,e,n,r);return 0===o.ref&&o.finalize(),c}function Xe(){return Ge.id||(Ge.id=++ze),++Ge.awaits,Ge.echoes+=ue,Ge.id}function et(e){!Ge.awaits||e&&e!==Ge.id||(0==--Ge.awaits&&(Ge.id=0),Ge.echoes=Ge.awaits*ue)}function tt(e){return Ge.echoes&&e&&e.constructor===me?(Xe(),e.then(function(e){return et(),e},function(e){return et(),lt(e)})):e}function nt(){var e=He[He.length-1];He.pop(),rt(e,!1)}function rt(e,t){var n,r=ke;if((t?!Ge.echoes||Ye++&&e===ke:!Ye||--Ye&&e===ke)||(n=t?function(e){++Ze,Ge.echoes&&0!=--Ge.echoes||(Ge.echoes=Ge.id=0),He.push(ke),rt(e,!0)}.bind(null,e):nt,pe.call(de,n)),e!==ke&&(ke=e,r===Me&&(Me.env=it()),ye)){var i=Me.env.Promise,a=e.env;he.then=a.nthen,i.prototype.then=a.gthen,(r.global||e.global)&&(Object.defineProperty(o,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject)}}function it(){var e=o.Promise;return ye?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:he.then,gthen:e.prototype.then}:{}}function ot(e,t,n,r,i){var o=ke;try{return rt(e,!0),t(n,r,i)}finally{rt(o,!1)}}function at(e,t,n){return"function"!=typeof e?e:function(){var r=ke;n&&Xe(),rt(t,!0);try{return e.apply(this,arguments)}finally{rt(r,!1)}}}function st(e,t){return function(n,r){return e.call(this,at(n,t,!1),at(r,t,!1))}}var ct="unhandledrejection";function ut(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ct,!0,!0),a(r,i)):o.CustomEvent&&a(r=new CustomEvent(ct,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var lt=Pe.reject;function dt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var o=1,a=arguments.length;o<a;++o)s(arguments[o]);return n;function s(e,o,a){if("object"!=typeof e){var c;o||(o=oe),a||(a=Q);var u={subscribers:[],fire:a,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=o(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter(function(t){return t!==e}),u.fire=u.subscribers.reduce(o,a)}};return t[e]=n[e]=u,u}r(c=e).forEach(function(e){var t=c[e];if(i(t))s(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new Y.InvalidArgument("Invalid event config");var n=s(e,X,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}var ht,ft=String.fromCharCode(65535),pt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ft}}(),mt=-1/0,gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt="String expected.",vt=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wt=bt,Et=bt,_t=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function xt(e,t){var n,s,c,d,f,p=xt.dependencies,m=a({addons:xt.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},t),b=m.addons,O=m.autoOpen,k=m.indexedDB,A=m.IDBKeyRange,P=this._dbSchema={},L=[],$=[],B={},F=null,U=null,K=!1,V=null,z=!1,H="readwrite",Z=this,J=new Pe(function(e){n=e}),te=new Pe(function(e,t){s=t}),oe=!0,se=!!jt(k);function ce(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ue(e,t,n){var i=Z._createTransaction(H,$,P);i.create(t),i._completion.catch(n);var o=i._reject.bind(i);Qe(function(){ke.trans=i,0===e?(r(P).forEach(function(e){le(t,e,P[e].primKey,P[e].indexes)}),Pe.follow(function(){return Z.on.populate.fire(i)}).catch(o)):function(e,t,n){var i=[],o=L.filter(function(t){return t._cfg.version===e})[0];if(!o)throw new Y.Upgrade("Dexie specification of currently installed DB version is missing");P=Z._dbSchema=o._cfg.dbschema;var a=!1;return L.filter(function(t){return t._cfg.version>e}).forEach(function(e){i.push(function(){var r=P,i=e._cfg.dbschema;De(r,n),De(i,n),P=Z._dbSchema=i;var o=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,c=o.idxByName;for(var u in s)c[u]||a.del.push(u);for(u in c){var l=s[u],d=c[u];l?l.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}(r,i);if(o.add.forEach(function(e){le(n,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){de(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),de(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,Pe.follow(function(){e._cfg.contentUpgrade(t)})}),i.push(function(t){a&&wt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)})}),function e(){return i.length?Pe.resolve(i.shift()(t.idbtrans)).then(e):Pe.resolve()}().then(function(){!function(e,t){r(e).forEach(function(n){t.db.objectStoreNames.contains(n)||le(t,n,e[n].primKey,e[n].indexes)})}(P,n)})}(e,i,t).catch(o)})}function le(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){de(i,e)}),i}function de(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function he(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=B[e]?B[e].hook:dt(null,{creating:[ne,Q],reading:[ee,X],updating:[ie,Q],deleting:[re,Q]})}function fe(e,t,n){return(n?kt:Ot)(function(n){e.push(n),t&&t()})}function pe(e,t,n,r,i){return new Pe(function(o,a){var s=n.length,c=s-1;if(0===s)return o();if(r){var u,l=kt(a),d=Ct(null);_(function(){for(var r=0;r<s;++r){u={onsuccess:null,onerror:null};var a=n[r];i.call(u,a[0],a[1],t);var h=e.delete(a[0]);h._hookCtx=u,h.onerror=l,h.onsuccess=r===c?Ct(o):d}},function(e){throw u.onerror&&u.onerror(e),e})}else for(var h=0;h<s;++h){var f=e.delete(n[h]);f.onerror=Ot(a),h===c&&(f.onsuccess=We(function(){return o()}))}})}function ye(e,t,n,r){var i=this;this.db=Z,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=dt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),lt(e)})}function ve(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function be(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function we(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ee(e,t){return e._cfg.version-t._cfg.version}function _e(e,t,n){t.forEach(function(t){var r=n[t];e.forEach(function(e){t in e||(e===ye.prototype||e instanceof ye?h(e,t,{get:function(){return this.table(t)}}):e[t]=new he(t,r))})})}function xe(e,t,n,r,i,o){var a=We(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=Ot(i)),e.onsuccess=E(t?function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,function(e){o=e},r,i)&&a(n.value,n,function(e){o=e}),o()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};a(t.value,t,function(e){n=e}),n()}else r()},i)}function Se(e,t){return k.cmp(e,t)}function Ce(e,t){return Se(e,t)>0?e:t}function Oe(e,t){return k.cmp(e,t)}function Me(e,t){return k.cmp(t,e)}function Te(e,t){return e<t?-1:e===t?0:1}function Ne(e,t){return e>t?-1:e===t?0:1}function Ae(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function De(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],a=t.objectStore(i);c="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var u=a.indexNames[s],l=a.index(u).keyPath,d="string"==typeof l?l:"["+g(l).join("+")+"]";if(e[i]){var h=e[i].idxByName[d];h&&(h.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c=!1)}function je(e){Z.on("blocked").fire(e),vt.filter(function(e){return e.name===Z.name&&e!==Z&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}this.version=function(e){if(F||K)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=L.filter(function(t){return t._cfg.version===e})[0];return t||(t=new ce(e),L.push(t),L.sort(Ee),oe=!1,t)},a(ce.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var t={};L.forEach(function(e){a(t,e._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),P=Z._dbSchema=n,[B,Z,ye.prototype].forEach(function(e){for(var t in e)e[t]instanceof he&&delete e[t]}),_e([B,Z,ye.prototype,this._cfg.tables],r(n),n),$=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach(function(n){if(null!==e[n]){var r={},o=function(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new At(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),/\./.test(e)))}),t}(e[n]),a=o.shift();if(a.multi)throw new Y.Schema("Primary key cannot be multi-valued");a.keyPath&&S(r,a.keyPath,a.auto?0:a.keyPath),o.forEach(function(e){if(e.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string");S(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new Pt(n,a,o,r)}})}}),this._allTables=B,this._createTransaction=function(e,t,n,r){return new ye(e,t,n,r)},this._whenReady=function(e){return z||ke.letThrough?e():new Pe(function(e,t){if(!K){if(!O)return void t(new Y.DatabaseClosed);Z.open().catch(Q)}J.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(K||F)return J.then(function(){return U?lt(U):Z});I&&(te._stackHolder=R()),K=!0,U=null,z=!1;var t=n,i=null;return Pe.race([te,new Pe(function(t,n){if(!k)throw new Y.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=oe?k.open(e):k.open(e,Math.round(10*Z.verno));if(!o)throw new Y.MissingAPI("IndexedDB API not available");o.onerror=Ot(n),o.onblocked=We(je),o.onupgradeneeded=We(function(t){if(i=o.transaction,oe&&!Z._allowEmptyDB){o.onerror=Tt,i.abort(),o.result.close();var r=k.deleteDatabase(e);r.onsuccess=r.onerror=We(function(){n(new Y.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{i.onerror=Ot(n),ue((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,n)}},n),o.onsuccess=We(function(){if(i=null,F=o.result,vt.push(Z),oe)!function(){if(Z.verno=F.version/10,Z._dbSchema=P={},0===($=g(F.objectStoreNames,0)).length)return;var e=F.transaction(Dt($),"readonly");$.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new At(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var c=n.index(n.indexNames[s]);r=c.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var u=new At(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);a.push(u)}P[t]=new Pt(t,o,a,{})}),_e([B],r(P),P)}();else if(F.objectStoreNames.length>0)try{De(P,F.transaction(Dt(F.objectStoreNames),"readonly"))}catch(e){}F.onversionchange=We(function(e){Z._vcFired=!0,Z.on("versionchange").fire(e)}),se||"__dbnames"===e||ht.dbnames.put({name:e}).catch(Q),t()},n)})]).then(function(){return V=[],Pe.resolve(xt.vip(Z.on.ready.fire)).then(function e(){if(V.length>0){var t=V.reduce(ae,Q);return V=[],Pe.resolve(xt.vip(t)).then(e)}})}).finally(function(){V=null}).then(function(){return K=!1,Z}).catch(function(e){try{i&&i.abort()}catch(e){}return K=!1,Z.close(),lt(U=e)}).finally(function(){z=!0,t()})},this.close=function(){var e=vt.indexOf(Z);if(e>=0&&vt.splice(e,1),F){try{F.close()}catch(e){}F=null}O=!1,U=new Y.DatabaseClosed,K&&s(U),J=new Pe(function(e){n=e}),te=new Pe(function(e,t){s=t})},this.delete=function(){var t=arguments.length>0;return new Pe(function(n,r){if(t)throw new Y.InvalidArgument("Arguments not allowed in db.delete()");function i(){Z.close();var t=k.deleteDatabase(e);t.onsuccess=We(function(){se||ht.dbnames.delete(e).catch(Q),n()}),t.onerror=Ot(r),t.onblocked=je}K?J.then(i):i()})},this.backendDB=function(){return F},this.isOpen=function(){return null!==F},this.hasBeenClosed=function(){return U&&U instanceof Y.DatabaseClosed},this.hasFailed=function(){return null!==U},this.dynamicallyOpened=function(){return oe},this.name=e,l(this,{tables:{get:function(){return r(B).map(function(e){return B[e]})}}}),this.on=dt(this,"populate","blocked","versionchange",{ready:[ae,Q]}),this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(t,n){xt.vip(function(){z?(U||Pe.resolve().then(t),n&&e(t)):V?(V.push(t),n&&e(t)):(e(t),n||e(function e(){Z.on.ready.unsubscribe(t),Z.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new Y.InvalidArgument("Too few arguments");var i=new Array(r-1);for(;--r;)i[r-1]=arguments[r];n=i.pop();var o=M(i);return[e,o,n]}.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=ke.trans;r&&r.db===Z&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var o=t.map(function(e){var t=e instanceof he?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=H)throw new Y.InvalidArgument("Invalid transaction mode: "+e);e=H}if(r){if("readonly"===r.mode&&e===H){if(!i)throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new Y.SubTransaction("Table "+e+" not included in parent transaction.");r=null}}),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,function(t,n){n(e)}):lt(e)}return r?r._promise(e,a,"lock"):ke.trans?ot(ke.transless,function(){return Z._whenReady(a)}):Z._whenReady(a);function a(){return Pe.resolve().then(function(){var t,i=ke.transless||ke,a=Z._createTransaction(e,o,P,r),s={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===ge&&Xe();var c=Pe.follow(function(){if(t=n.call(a,a))if(t.constructor===me){var e=et.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Nt(t))},s);return(t&&"function"==typeof t.then?Pe.resolve(t).then(function(e){return a.active?e:lt(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return t})).then(function(e){return r&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),lt(e)})})}},this.table=function(e){if(!u(B,e))throw new Y.InvalidTable("Table "+e+" does not exist");return B[e]},l(he.prototype,{_trans:function(e,t,n){var r=this._tx||ke.trans;return r&&r.db===Z?r===ke.trans?r._promise(e,t,n):Qe(function(){return r._promise(e,t,n)},{trans:r,transless:ke.transless||ke}):function e(t,n,r){if(z||ke.letThrough){var i=Z._createTransaction(t,n,P);try{i.create()}catch(e){return lt(e)}return i._promise(t,function(e,t){return Qe(function(){return ke.trans=i,r(e,t,i)})}).then(function(e){return i._completion.then(function(){return e})})}if(!K){if(!O)return lt(new Y.DatabaseClosed);Z.open().catch(Q)}return J.then(function(){return e(t,n,r)})}(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new Y.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)},n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore("readonly",function(t,r,i){var o=i.get(e);o.onerror=Ot(r),o.onsuccess=We(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(e){if("string"==typeof e)return new ve(this,e);if(i(e))return new ve(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(n&&pt!==ft)return this.where(n.name).equals(n.keyPath.map(function(t){return e[t]}));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var o=this.schema.idxByName,a=t.reduce(function(t,n){return[t[0]||o[n],t[0]||!o[n]?Ae(t[1],function(t){return""+x(t,n)==""+e[n]}):t[1]]},[null,null]),s=a[0];return s?this.where(s.name).equals(e[s.keyPath]).filter(a[1]):n?this.filter(a[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new be(new ve(this,i(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new be(new ve(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&St(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(u(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(xt.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Q?this._idbstore(H,function(t,n,r,i){t(pe(r,i,e,!1,Q))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(H,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new Y.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,c=function(e){0===u.length?r(e):i(new G(n.name+".bulkPut(): "+u.length+" of "+l+" operations failed",u))},u=[],l=e.length,d=n;if(n.hook.creating.fire===Q&&n.hook.updating.fire===Q){s=fe(u);for(var h=0,f=e.length;h<f;++h)(a=t?o.put(e[h],t[h]):o.put(e[h])).onerror=s;a.onerror=fe(u,c),a.onsuccess=Mt(c)}else{var p=t||o.keyPath&&e.map(function(e){return x(e,o.keyPath)}),m=p&&w(p,function(t,n){return null!=t&&[t,e[n]]});(p?d.where(":id").anyOf(p.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(W,function(e){u=e.failures}).then(function(){for(var n=[],r=t&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||m[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(m[o]=null))}return n.reverse(),t&&r.reverse(),d.bulkAdd(n,r)}).then(function(e){var t=p[p.length-1];return null!=t?t:e}):d.bulkAdd(e)).then(c).catch(G,function(e){u=u.concat(e.failures),c()}).catch(i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(H,function(i,o,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new Y.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function c(e){0===h.length?i(e):o(new G(n.name+".bulkAdd(): "+h.length+" of "+f+" operations failed",h))}var u,l,d,h=[],f=e.length;if(r!==Q){var p,m=a.keyPath;l=fe(h,null,!0),d=Ct(null),_(function(){for(var n=0,i=e.length;n<i;++n){p={onerror:null,onsuccess:null};var o=t&&t[n],c=e[n],h=t?o:m?x(c,m):void 0,f=r.call(p,h,c,s);null==h&&null!=f&&(m?S(c=T(c),m,f):o=f),(u=null!=o?a.add(c,o):a.add(c))._hookCtx=p,n<i-1&&(u.onerror=l,p.onsuccess&&(u.onsuccess=d))}},function(e){throw p.onerror&&p.onerror(e),e}),u.onerror=fe(h,c,!0),u.onsuccess=Ct(c)}else{l=fe(h);for(var g=0,y=e.length;g<y;++g)(u=t?a.add(e[g],t[g]):a.add(e[g])).onerror=l;u.onerror=fe(h,c),u.onsuccess=Mt(c)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(H,function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==Q){var c=null!=t?t:o.keyPath?x(e,o.keyPath):void 0,u=n.call(s,c,e,a);null==c&&null!=u&&(o.keyPath?S(e,o.keyPath,u):t=u)}try{var l=null!=t?o.add(e,t):o.add(e);l._hookCtx=s,l.onerror=kt(i),l.onsuccess=Ct(function(t){var n=o.keyPath;n&&S(e,n,t),r(t)})}catch(e){throw s.onerror&&s.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Q||i!==Q){var o=this.schema.primKey.keyPath,a=void 0!==t?t:o&&x(e,o);return null==a?this.add(e):(e=T(e),this._trans(H,function(){return n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a})},"locked"))}return this._idbstore(H,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=Ot(r),o.onsuccess=We(function(t){var r=i.keyPath;r&&S(e,r,t.target.result),n(o.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(H,function(t,n,r){var i=r.delete(e);i.onerror=Ot(n),i.onsuccess=We(function(){t(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(H,function(e,t,n){var r=n.clear();r.onerror=Ot(t),r.onsuccess=We(function(){e(r.result)})})},update:function(e,t){if("object"!=typeof t||i(t))throw new Y.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);r(t).forEach(function(n){S(e,n,t[n])});var n=x(e,this.schema.primKey.keyPath);return void 0===n?lt(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),l(ye.prototype,{_lock:function(){return v(!ke.global),++this._reculock,1!==this._reculock||ke.global||(ke.lockOwnerFor=this),this},_unlock:function(){if(v(!ke.global),0==--this._reculock)for(ke.global||(ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&ke.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(v(!this.idbtrans),!e&&!F)switch(U&&U.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(U);case"MissingAPIError":throw new Y.MissingAPI(U.message,U);default:throw new Y.OpenFailed(U)}if(!this.active)throw new Y.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||F.transaction(Dt(this.storeNames),this.mode)).onerror=We(function(n){Tt(n),t._reject(e.error)}),e.onabort=We(function(n){Tt(n),t.active&&t._reject(new Y.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=We(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this;if(e===H&&this.mode!==H)return lt(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new Y.TransactionInactive);if(this._locked())return new Pe(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},ke])});if(n)return Qe(function(){var e=new Pe(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new Pe(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Pe.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Pe(function(n,i){e.then(function(e){return t._waitingQueue.push(We(n.bind(null,e)))},function(e){return t._waitingQueue.push(We(i.bind(null,e)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Y.Abort),this.active=!1},tables:{get:(d="Transaction.tables",f=function(){return B},function(){return console.warn(d+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+q(R(),1)),f.apply(this,arguments)})},table:function(e){return new he(e,Z.table(e).schema,this)}}),l(ve.prototype,function(){function e(e,t,n){var r=e instanceof ve?new be(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new be(e,function(){return A.only("")}).limit(0)}function n(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,c=0;c<a;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[c],u)<0&&(s=c)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function r(t,r,i,o){var a,s,c,u,l,d,h,f=i.length;if(!i.every(function(e){return"string"==typeof e}))return e(t,yt);function p(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),s=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),c="next"===e?Te:Ne;var t=i.map(function(e){return{lower:s(e),upper:a(e)}}).sort(function(e,t){return c(e.lower,t.lower)});u=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),d=e,h="next"===e?"":o}p("next");var m=new be(t,function(){return A.bound(u[0],l[f-1]+o)});m._ondirectionchange=function(e){p(e)};var g=0;return m._addAlgorithm(function(e,t,i){var o=e.key;if("string"!=typeof o)return!1;var a=s(o);if(r(a,l,g))return!0;for(var p=null,m=g;m<f;++m){var y=n(o,a,u[m],l[m],c,d);null===y&&null===p?g=m+1:(null===p||c(p,y)>0)&&(p=y)}return t(null!==p?function(){e.continue(p+h)}:i),!1}),m}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return Se(n,r)>0||0===Se(n,r)&&(i||o)&&(!i||!o)?t(this):new be(this,function(){return A.bound(n,r,!i,!o)})}catch(t){return e(this,gt)}},equals:function(e){return new be(this,function(){return A.only(e)})},above:function(e){return new be(this,function(){return A.lowerBound(e,!0)})},aboveOrEqual:function(e){return new be(this,function(){return A.lowerBound(e)})},below:function(e){return new be(this,function(){return A.upperBound(e,!0)})},belowOrEqual:function(e){return new be(this,function(){return A.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,yt):this.between(t,t+ft,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,function(e,t){return 0===e.indexOf(t[0])},[e],ft)},equalsIgnoreCase:function(e){return r(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=j.apply(D,arguments);return 0===e.length?t(this):r(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=j.apply(D,arguments);return 0===e.length?t(this):r(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,ft)},anyOf:function(){var n=j.apply(D,arguments),r=Oe;try{n.sort(r)}catch(t){return e(this,gt)}if(0===n.length)return t(this);var i=new be(this,function(){return A.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Oe:Me,n.sort(r)};var o=0;return i._addAlgorithm(function(e,t,i){for(var a=e.key;r(a,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(a,n[o])||(t(function(){e.continue(n[o])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[mt,e],[e,pt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=j.apply(D,arguments);if(0===t.length)return new be(this);try{t.sort(Oe)}catch(t){return e(this,gt)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[mt,t]]},null);return n.push([t[t.length-1],pt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Oe(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var a,s=Oe;function c(e,t){return s(e[0],t[0])}try{(a=n.reduce(function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Se(t[0],i[1])<0&&Se(t[1],i[0])>0){i[0]=(o=i[0],a=t[0],Se(o,a)<0?o:a),i[1]=Ce(i[1],t[1]);break}}var o,a;return n===r&&e.push(t),e},[])).sort(c)}catch(t){return e(this,gt)}var u=0,l=o?function(e){return Oe(e,a[u][1])>0}:function(e){return Oe(e,a[u][1])>=0},d=i?function(e){return Me(e,a[u][0])>0}:function(e){return Me(e,a[u][0])>=0};var h=l,f=new be(this,function(){return A.bound(a[0][0],a[a.length-1][1],!i,!o)});return f._ondirectionchange=function(e){"next"===e?(h=l,s=Oe):(h=d,s=Me),a.sort(c)},f._addAlgorithm(function(e,t,n){for(var r=e.key;h(r);)if(++u===a.length)return t(n),!1;return!!function(e){return!l(e)&&!d(e)}(r)||0!==Se(r,a[u][1])&&0!==Se(r,a[u][0])&&(t(function(){s===Oe?e.continue(a[u][0]):e.continue(a[u][1])}),!1)}),f},startsWithAnyOf:function(){var n=j.apply(D,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+ft]})):e(this,"startsWithAnyOf() only works with strings")}}}),l(be.prototype,function(){function e(e,t){e.filter=Ae(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ae(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Y.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function i(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function o(e,t,n,r,o){var a=e.replayFilter?Ae(e.filter,e.replayFilter()):e.filter;e.or?function(){var s={},c=0;function l(){2==++c&&n()}function d(e,n,i){if(!a||a(n,i,l,r)){var o=n.primaryKey,c=""+o;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(o)),u(s,c)||(s[c]=!0,t(e,n,i))}}e.or._iterate(d,l,r,o),xe(i(e,o),e.algorithm,d,l,r,!e.keysOnly&&e.valueMapper)}():xe(i(e,o),Ae(e.algorithm,a),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,lt.bind(null,n.error)):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,lt.bind(null,t.error)):t.table._idbstore(H,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ae(t.algorithm,e)},_iterate:function(e,t,n,r){return o(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(n,r,i){o(t,e,n,r,i)})},count:function(e){var t=this._ctx;if(we(t,!0))return this._read(function(e,r,i){var o=n(t,i),a=t.range?o.count(t.range):o.count();a.onerror=Ot(r),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var r=0;return this._read(function(e,n,i){o(t,function(){return++r,!1},function(){e(r)},n,i)},e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray(function(e){return e.sort(s)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,r,i){if(c&&"next"===t.dir&&we(t,!0)&&t.limit>0){var a=t.table.hook.reading.fire,s=n(t,i),u=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);u.onerror=Ot(r),u.onsuccess=Mt(a===X?e:function(t){try{e(t.map(a))}catch(e){r(e)}})}else{var l=[];o(t,function(e){l.push(e)},function(){e(l)},r,i)}},e)},offset:function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,we(n)?t(n,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):t(n,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(t,n){return e(this._ctx,function(e,r,i){return!t(e.value)||(r(i),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){var n,r;return e(this._ctx,function(e){return t(e.value)}),n=this._ctx,r=t,n.isMatch=Ae(n.isMatch,r),this},and:function(e){return this.filter(e)},or:function(e){return new ve(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(c&&"next"===t.dir&&we(t,!0)&&t.limit>0)return this._read(function(e,r,i){var o=n(t,i),a=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);a.onerror=Ot(r),a.onsuccess=Mt(e)}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),n=u(r,t);return r[t]=!0,!n}),this},modify:function(e){var t=this,n=this._ctx.table.hook,i=n.updating.fire,o=n.deleting.fire;return this._write(function(n,s,c,l){var d;if("function"==typeof e)d=i===Q&&o===Q?e:function(t){var n=T(t);if(!1===e.call(this,t,this))return!1;if(u(this,"value")){var a=N(n,this.value),s=i.call(this,a,this.primKey,n,l);s&&(t=this.value,r(s).forEach(function(e){S(t,e,s[e])}))}else o.call(this,this.primKey,t,l)};else if(i===Q){var h=r(e),f=h.length;d=function(t){for(var n=!1,r=0;r<f;++r){var i=h[r],o=e[i];x(t,i)!==o&&(S(t,i,o),n=!0)}return n}}else{var p=e;e=C(p),d=function(t){var n=!1,o=i.call(this,e,this.primKey,T(t),l);return o&&a(e,o),r(e).forEach(function(r){var i=e[r];x(t,r)!==i&&(S(t,r,i),n=!0)}),o&&(e=C(p)),n}}var m=0,g=0,y=!1,v=[],b=[],w=null;function E(e){return e&&(v.push(e),b.push(w)),s(new W("Error modifying one or more objects",v,g,b))}function O(){y&&g+v.length===m&&(v.length>0?E():n(g))}t.clone().raw()._iterate(function(e,t){w=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return v.push(e),b.push(n.primKey),O(),!0}if(!1!==d.call(n,e,n)){var i=!u(n,"value");++m,_(function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=kt(r),e.onsuccess=Ct(function(){++g,O()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){y=!0,O()},E,c)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==Q;if(!i&&we(t)&&(t.isPrimKey&&!Et||!n))return this._write(function(e,t,r){var i=Ot(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;_(function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,a,s,c){var u=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),d=[],h=function(){return l.each(i?function(e,t){d.push([t.primaryKey,t.value])}:function(e,t){d.push(t.primaryKey)}).then(function(){return i?d.sort(function(e,t){return Oe(e[0],t[0])}):d.sort(Oe),pe(s,c,d,i,r)}).then(function(){var e=d.length;return d=[],e<o?u+=e:h()})};n(h())})}}}),a(this,{Collection:be,Table:he,Transaction:ye,Version:ce,WhereClause:ve}),Z.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Z.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Z.name+"'. Closing db now to resume the delete request."),Z.close()}),Z.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Z.name+"') was blocked"):console.warn("Upgrade '"+Z.name+"' blocked by other connection holding version "+e.oldVersion/10)}),b.forEach(function(e){e(Z)})}function St(e,t){return r(t).forEach(function(n){var r=function e(t){if("function"==typeof t)return new t;if(i(t))return[e(t[0])];if(t&&"object"==typeof t){var n={};return St(n,t),n}return t}(t[n]);e[n]=r}),e}function Ct(e){return We(function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)},e)}function Ot(e){return We(function(t){return Tt(t),e(t.target.error),!1})}function Mt(e){return We(function(t){e(t.target.result)})}function kt(e){return We(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),Tt(t),e(r),!1})}function Tt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Nt(e){var t=function(t){return e.next(t)},n=o(t),r=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t),a=o.value;return o.done?a:a&&"function"==typeof a.then?a.then(n,r):i(a)?Pe.all(a).then(n,r):n(a)}}return o(t)()}function At(e,t,n,r,i,o,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function Pt(e,t,n,r){this.name=e,this.primKey=t||new At,this.indexes=n||[new At],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=w(n,function(e){return[e.name,e]})}function Dt(e){return 1===e.length?e[0]:e}function jt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}L(I,_t),l(xt,J),l(xt,{delete:function(e){var t=new xt(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new xt(e).open().then(function(e){return e.close(),!0}).catch(xt.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=jt(xt.dependencies.indexedDB);return t?new Pe(function(e,n){var r=t();r.onsuccess=function(t){e(g(t.target.result,0))},r.onerror=Ot(n)}).then(e):ht.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&a(this,e)}},applyStructure:St,ignoreTransaction:function(e){return ke.trans?ot(ke.transless,e):e()},vip:function(e){return Qe(function(){return ke.letThrough=!0,e()})},async:function(e){return function(){try{var t=Nt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Pe.resolve(t)}catch(e){return lt(e)}}},spawn:function(e,t,n){try{var r=Nt(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Pe.resolve(r)}catch(e){return lt(e)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(e,t){var n=Pe.resolve("function"==typeof e?xt.ignoreTransaction(e):e).timeout(t||6e4);return ke.trans?ke.trans.waitFor(n):n},Promise:Pe,debug:{get:function(){return I},set:function(e){L(e,"dexie"===e?function(){return!0}:_t)}},derive:f,extend:a,props:l,override:y,Events:dt,getByKeyPath:x,setByKeyPath:S,delByKeyPath:function(e,t){"string"==typeof t?S(e,t,void 0):"length"in t&&[].map.call(t,function(t){S(e,t,void 0)})},shallowClone:C,deepClone:T,getObjectDiff:N,asap:b,maxKey:pt,minKey:mt,addons:[],connections:vt,MultiModifyError:Y.Modify,errnames:z,IndexSpec:At,TableSchema:Pt,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:xt,Dexie:xt}),Pe.rejectionMapper=function(e,t){if(!e||e instanceof V||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Z[e.name])return e;var n=new Z[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n},(ht=new xt("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(e){return ht.dbnames.put({name:e}).catch(Q)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}(),t.a=xt}).call(this,n(8),n(21).setImmediate)},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(0);n(28);class o{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}const a=new Map([["AF",{name:"Afghanistan"}],["AX",{name:"land Islands"}],["AL",{name:"Albania"}],["DZ",{name:"Algeria"}],["AS",{name:"American Samoa"}],["AD",{name:"Andorra"}],["AO",{name:"Angola"}],["AI",{name:"Anguilla"}],["AQ",{name:"Antarctica"}],["AG",{name:"Antigua and Barbuda"}],["AR",{name:"Argentina"}],["AM",{name:"Armenia"}],["AW",{name:"Aruba"}],["AU",{name:"Australia"}],["AT",{name:"Austria"}],["AZ",{name:"Azerbaijan"}],["BS",{name:"Bahamas"}],["BH",{name:"Bahrain"}],["BD",{name:"Bangladesh"}],["BB",{name:"Barbados"}],["BY",{name:"Belarus"}],["BE",{name:"Belgium"}],["BZ",{name:"Belize"}],["BJ",{name:"Benin"}],["BM",{name:"Bermuda"}],["BT",{name:"Bhutan"}],["BO",{name:"Bolivia, Plurinational State of"}],["BQ",{name:"Bonaire, Sint Eustatius and Saba"}],["BA",{name:"Bosnia and Herzegovina"}],["BW",{name:"Botswana"}],["BV",{name:"Bouvet Island"}],["BR",{name:"Brazil"}],["IO",{name:"British Indian Ocean Territory"}],["BN",{name:"Brunei Darussalam"}],["BG",{name:"Bulgaria"}],["BF",{name:"Burkina Faso"}],["BI",{name:"Burundi"}],["KH",{name:"Cambodia"}],["CM",{name:"Cameroon"}],["CA",{name:"Canada"}],["CV",{name:"Cape Verde"}],["KY",{name:"Cayman Islands"}],["CF",{name:"Central African Republic"}],["TD",{name:"Chad"}],["CL",{name:"Chile"}],["CN",{name:"China"}],["CX",{name:"Christmas Island"}],["CC",{name:"Cocos (Keeling) Islands"}],["CO",{name:"Colombia"}],["KM",{name:"Comoros"}],["CG",{name:"Congo"}],["CD",{name:"Congo, the Democratic Republic of the"}],["CK",{name:"Cook Islands"}],["CR",{name:"Costa Rica"}],["CI",{name:"Côte d'Ivoire"}],["HR",{name:"Croatia"}],["CU",{name:"Cuba"}],["CW",{name:"Curaçao"}],["CY",{name:"Cyprus"}],["CZ",{name:"Czech Republic"}],["DK",{name:"Denmark"}],["DJ",{name:"Djibouti"}],["DM",{name:"Dominica"}],["DO",{name:"Dominican Republic"}],["EC",{name:"Ecuador"}],["EG",{name:"Egypt"}],["SV",{name:"El Salvador"}],["GQ",{name:"Equatorial Guinea"}],["ER",{name:"Eritrea"}],["EE",{name:"Estonia"}],["ET",{name:"Ethiopia"}],["FK",{name:"Falkland Islands (Malvinas)"}],["FO",{name:"Faroe Islands"}],["FJ",{name:"Fiji"}],["FI",{name:"Finland"}],["FR",{name:"France"}],["GF",{name:"French Guiana"}],["PF",{name:"French Polynesia"}],["TF",{name:"French Southern Territories"}],["GA",{name:"Gabon"}],["GM",{name:"Gambia"}],["GE",{name:"Georgia"}],["DE",{name:"Germany"}],["GH",{name:"Ghana"}],["GI",{name:"Gibraltar"}],["GR",{name:"Greece"}],["GL",{name:"Greenland"}],["GD",{name:"Grenada"}],["GP",{name:"Guadeloupe"}],["GU",{name:"Guam"}],["GT",{name:"Guatemala"}],["GG",{name:"Guernsey"}],["GN",{name:"Guinea"}],["GW",{name:"Guinea-Bissau"}],["GY",{name:"Guyana"}],["HT",{name:"Haiti"}],["HM",{name:"Heard Island and McDonald Islands"}],["VA",{name:"Holy See (Vatican City State)"}],["HN",{name:"Honduras"}],["HK",{name:"Hong Kong"}],["HU",{name:"Hungary"}],["IS",{name:"Iceland"}],["IN",{name:"India"}],["ID",{name:"Indonesia"}],["IR",{name:"Iran, Islamic Republic of"}],["IQ",{name:"Iraq"}],["IE",{name:"Ireland"}],["IM",{name:"Isle of Man"}],["IL",{name:"Israel"}],["IT",{name:"Italy"}],["JM",{name:"Jamaica"}],["JP",{name:"Japan"}],["JE",{name:"Jersey"}],["JO",{name:"Jordan"}],["KZ",{name:"Kazakhstan"}],["KE",{name:"Kenya"}],["KI",{name:"Kiribati"}],["KP",{name:"Korea, Democratic People's Republic of"}],["KR",{name:"Korea, Republic of"}],["KW",{name:"Kuwait"}],["KG",{name:"Kyrgyzstan"}],["LA",{name:"Lao People's Democratic Republic"}],["LV",{name:"Latvia"}],["LB",{name:"Lebanon"}],["LS",{name:"Lesotho"}],["LR",{name:"Liberia"}],["LY",{name:"Libya"}],["LI",{name:"Liechtenstein"}],["LT",{name:"Lithuania"}],["LU",{name:"Luxembourg"}],["MO",{name:"Macao"}],["MK",{name:"Macedonia, the former Yugoslav Republic of"}],["MG",{name:"Madagascar"}],["MW",{name:"Malawi"}],["MY",{name:"Malaysia"}],["MV",{name:"Maldives"}],["ML",{name:"Mali"}],["MT",{name:"Malta"}],["MH",{name:"Marshall Islands"}],["MQ",{name:"Martinique"}],["MR",{name:"Mauritania"}],["MU",{name:"Mauritius"}],["YT",{name:"Mayotte"}],["MX",{name:"Mexico"}],["FM",{name:"Micronesia, Federated States of"}],["MD",{name:"Moldova, Republic of"}],["MC",{name:"Monaco"}],["MN",{name:"Mongolia"}],["ME",{name:"Montenegro"}],["MS",{name:"Montserrat"}],["MA",{name:"Morocco"}],["MZ",{name:"Mozambique"}],["MM",{name:"Myanmar"}],["NA",{name:"Namibia"}],["NR",{name:"Nauru"}],["NP",{name:"Nepal"}],["NL",{name:"Netherlands"}],["NC",{name:"New Caledonia"}],["NZ",{name:"New Zealand"}],["NI",{name:"Nicaragua"}],["NE",{name:"Niger"}],["NG",{name:"Nigeria"}],["NU",{name:"Niue"}],["NF",{name:"Norfolk Island"}],["MP",{name:"Northern Mariana Islands"}],["NO",{name:"Norway"}],["OM",{name:"Oman"}],["PK",{name:"Pakistan"}],["PW",{name:"Palau"}],["PS",{name:"Palestinian Territory, Occupied"}],["PA",{name:"Panama"}],["PG",{name:"Papua New Guinea"}],["PY",{name:"Paraguay"}],["PE",{name:"Peru"}],["PH",{name:"Philippines"}],["PN",{name:"Pitcairn"}],["PL",{name:"Poland"}],["PT",{name:"Portugal"}],["PR",{name:"Puerto Rico"}],["QA",{name:"Qatar"}],["RE",{name:"Réunion"}],["RO",{name:"Romania"}],["RU",{name:"Russian Federation"}],["RW",{name:"Rwanda"}],["BL",{name:"Saint Barthélemy"}],["SH",{name:"Saint Helena, Ascension and Tristan da Cunha"}],["KN",{name:"Saint Kitts and Nevis"}],["LC",{name:"Saint Lucia"}],["MF",{name:"Saint Martin (French part)"}],["PM",{name:"Saint Pierre and Miquelon"}],["VC",{name:"Saint Vincent and the Grenadines"}],["WS",{name:"Samoa"}],["SM",{name:"San Marino"}],["ST",{name:"Sao Tome and Principe"}],["SA",{name:"Saudi Arabia"}],["SN",{name:"Senegal"}],["RS",{name:"Serbia"}],["SC",{name:"Seychelles"}],["SL",{name:"Sierra Leone"}],["SG",{name:"Singapore"}],["SX",{name:"Sint Maarten (Dutch part)"}],["SK",{name:"Slovakia"}],["SI",{name:"Slovenia"}],["SB",{name:"Solomon Islands"}],["SO",{name:"Somalia"}],["ZA",{name:"South Africa"}],["GS",{name:"South Georgia and the South Sandwich Islands"}],["SS",{name:"South Sudan"}],["ES",{name:"Spain"}],["LK",{name:"Sri Lanka"}],["SD",{name:"Sudan"}],["SR",{name:"Suriname"}],["SJ",{name:"Svalbard and Jan Mayen"}],["SZ",{name:"Swaziland"}],["SE",{name:"Sweden"}],["CH",{name:"Switzerland"}],["SY",{name:"Syrian Arab Republic"}],["TW",{name:"Taiwan, Province of China"}],["TJ",{name:"Tajikistan"}],["TZ",{name:"Tanzania, United Republic of"}],["TH",{name:"Thailand"}],["TL",{name:"Timor-Leste"}],["TG",{name:"Togo"}],["TK",{name:"Tokelau"}],["TO",{name:"Tonga"}],["TT",{name:"Trinidad and Tobago"}],["TN",{name:"Tunisia"}],["TR",{name:"Turkey"}],["TM",{name:"Turkmenistan"}],["TC",{name:"Turks and Caicos Islands"}],["TV",{name:"Tuvalu"}],["UG",{name:"Uganda"}],["UA",{name:"Ukraine"}],["AE",{name:"United Arab Emirates"}],["GB",{name:"United Kingdom"}],["US",{name:"United States"}],["UM",{name:"United States Minor Outlying Islands"}],["UY",{name:"Uruguay"}],["UZ",{name:"Uzbekistan"}],["VU",{name:"Vanuatu"}],["VE",{name:"Venezuela, Bolivarian Republic of"}],["VN",{name:"Viet Nam"}],["VG",{name:"Virgin Islands, British"}],["VI",{name:"Virgin Islands, U.S."}],["WF",{name:"Wallis and Futuna"}],["EH",{name:"Western Sahara"}],["YE",{name:"Yemen"}],["ZM",{name:"Zambia"}],["ZW",{name:"Zimbabwe"}]]);class s{constructor(){throw new TypeError("No constructor - use statics")}static get(e){return Object.assign({},a.get(e))}static asHTMLSelect(e="",t="US",n="country",r="no"){const o=document.createElement("select");o.classList.add(e),o.name=n,o.autocomplete="country",o.required="required"===r;const a=Object(i.bind)(o);return a`${s.asHTMLOptions(t)}`}static asHTMLOptions(e){return Array.from(a.entries()).map(([t,n])=>(function(e,t){const[n,{name:r}]=e;return Object(i["wire"])(e)`
  <option value="${n}" selected="${n===t}">
      ${r} 
  </option>`})([t,n],e))}}var c=n(1),u=n.n(c);const l=new(n(16).a)("Autofill"),d="timeCreated, timeLastUsed, timeLastModified, timesUsed, ";l.version(1).stores({addresses:d+"&guid, organization, streetAddress, addressLevel1, addressLevel2, postalCode, country, tel, email, type",cards:d+"&uuid, cardNumber, cardholderName, expiryMonth, expiryYear, billingAddressUuid"}),l.version(2).stores({payers:d+"&uuid, payerName, payerPhone, payerEmail"}),window.db=l;var h=l;const f=new WeakMap,p=Object.freeze({proceedLabel:"Continue",cancelLabel:"Cancel"});class m extends EventTarget{constructor(e,t=[],n="",r=null){super();const o=f.set(this,new Map).get(this),a=document.createElement("section");t.forEach(e=>a.classList.add(e)),o.set("data",null),o.set("renderer",Object(i.bind)(a)),o.set("schema",e),o.set("section",a),o.set("tableName",n),o.set("ready",async function(e,t){if(!e)return this;h.isOpen()||await h.open();if(!h[e])throw new Error(`No database table/schema for ${e}`);await h[e].count()?this.data=await h[e].orderBy("timeLastUsed").last():this.data=Object.assign({},t,{timeCreated:Date.now(),timeLastModified:Date.now(),timeLastUsed:Date.now(),timesUsed:0});return this}.call(this,n,r))}get request(){return f.get(this).get("request")}set request(e){f.get(this).set("request",e)}get renderer(){return f.get(this).get("renderer")}get ready(){return f.get(this).get("ready")}set data(e){return f.get(this).set("data",e)}get data(){return f.get(this).get("data")}get form(){return f.get(this).get("section").closest("form")}get dataSheet(){return f.get(this).get("dataSheet")}set dataSheet(e){return e.form.addEventListener("reset",()=>{console.log("Abstract resetting..."),this.reset()}),f.get(this).set("dataSheet",e)}reset(){console.log("Abstract DataCollector resetting...")}toObject(){const e=f.get(this).get("schema"),t=this.form;return Array.from(new FormData(t).entries()).filter(([t])=>e.has(t)).reduce((e,[t,n])=>(e[t]=n,e),{})}async save(){const e=f.get(this).get("tableName");if(e){if("on"!==new FormData(this.form).get("saveDetails"))return;const t=Object.assign({},this.data,this.toObject());h.isOpen()||await h.open(),await h[e].put(t),this.data=t}}get buttonLabels(){return p}}const g=new WeakMap,y=Object.freeze(["city","country","dependentLocality","languageCode","organization","phone","postalCode","recipient","region","sortingCode"]),v=Object.freeze(["addressLine"]);function b(e){return function(t){return n=>[`[[${n}]]`,e(t.hasOwnProperty(n)?t[n]:"")]}}const w=b(e=>String(void 0===e?"":e)),E=b(e=>Array(...e).map(e=>String(void 0===e?"":e)));class _{constructor(e){const t=g.set(this,new Map).get(this);y.map(w(e)).concat(v.map(E(e))).reduce((e,[n,r])=>t.set(n,r),t)}toJSON(){JSON.stringify({city:this.city,country:this.country,dependentLocality:this.dependentLocality,languageCode:this.languageCode,organization:this.organization,phone:this.phone,postalCode:this.postalCode,recipient:this.recipient,region:this.region,sortingCode:this.sortingCode})}get region(){return g.get(this).get("[[region]]")}get addressLine(){return g.get(this).get("[[addressLine]]")}get country(){return g.get(this).get("[[country]]")}get city(){return g.get(this).get("[[city]]")}get dependentLocality(){return g.get(this).get("[[dependentLocality]]")}get postalCode(){return g.get(this).get("[[postalCode]]")}get sortingCode(){return g.get(this).get("[[sortingCode]]")}get languageCode(){return g.get(this).get("[[languageCode]]")}get phone(){return g.get(this).get("[[phone]]")}get organization(){return g.get(this).get("[[organization]]")}get recipient(){return g.get(this).get("[[recipient]]")}}const x=new WeakMap,S=new Set(["shipping","billing"]),C={addressLevel1:"",addressLevel2:"",country:"",fullName:"",guid:"",phoneNumber:"",postalCode:"",streetAddress:""},O=new Set([...Object.keys(C)]),M=Object.freeze({options:{requestPayerEmail:!1,requestPayerName:!1,requestPayerPhone:!1,requestShipping:!1}});class k extends m{constructor(e="shipping"){const t=Object.assign({},C,{guid:u()()});if(super(O,[`data-collector-${e}-address`],"addresses",t),!S.has(e))throw new TypeError(`Invalid address type: ${e}`);const n=x.set(this,new Map).get(this);n.set("addressType",e),n.set("didNotifyAddressChange",!1)}reset(){console.log("AddressCollector RESET!"),x.get(this).set("didNotifyAddressChange",!1)}notifyAddressChange(){const e=x.get(this),t={detail:{shippingAddress:this.toPaymentAddress()}};this.dispatchEvent(new CustomEvent("shippingaddresschange",t)),e.set("didNotifyAddressChange",!0)}get didNotifyAddressChange(){return x.get(this).get("didNotifyAddressChange")}get addressType(){return x.get(this).get("addressType")}async save(){const{data:e}=this;e.addressLine=[].concat(e.streetAddress),e.timeLastModified=Date.now(),await super.save()}toPaymentAddress(){const{streetAddress:e,addressLevel1:t,addressLevel2:n,country:r,phoneNumber:i,postalCode:o,fullName:a}=this.toObject();return new _({addressLine:[e],city:n,country:r,phone:i,postalCode:o,recipient:a,region:t})}render(e=M){const{data:t}=this,{options:{requestPayerName:n,requestPayerPhone:r,requestShipping:i}}=e;return this.renderer`
      <input 
        type="hidden"
        name="uuid"
        value="${t.guid}">
      <input
        autocomplete="${this.addressType+" name"}"
        class="left-half"
        name="fullName"
        placeholder="Name"
        required="${n}"
        type="text"
        value="${t.fullName}">
      <input
        autocomplete="${this.addressType+" tel"}"
        class="right-half"
        name="phoneNumber"
        placeholder="Phone Number"
        required="${r}"
        type="tel"
        value="${t.phoneNumber}">
      <input
        autocomplete="${this.addressType+" street-address"}"
        class="full"
        name="streetAddress"
        placeholder="Address"
        required="${i}"
        type="text"
        value="${t.streetAddress}">
      <input
        autocomplete="${this.addressType+" address-level2"}"
        class="two-thirds"
        name="addressLevel2"
        placeholder="City"
        required="${i}"
        type="text"
        value="${t.addressLevel2}">
      <input
        autocomplete="${this.addressType+" address-level1"}"
        name="addressLevel1"
        placeholder="State"
        required="${i}"
        type="text"
        value="${t.addressLevel1}">${s.asHTMLSelect("two-thirds",t.country||"US","country",i?"required":null)}<input
        autocomplete="${this.addressType+" postal-code"}"
        name="postalCode"
        placeholder="Post code"
        required="${i}"
        type="text"
        value="${t.postalCode}">
      <label class="full">
        <input type="checkbox" name="saveDetails" checked> Save the address for faster checkout next time
      </label>
    `}}class T{format(e,t="text"){let n;const{name:r}={name:"",...s.get(e.country)};switch(t){case"html":n=Object(i["wire"])(e)`
          <div>
            ${e.addressLine.join(" ")}
          </div>
          <div>
            ${e.city}, ${e.region}
          </div>
          <div>
             ${r.toLocaleUpperCase()} ${e.postalCode}
          </div>
        `;break;default:n=`${e.addressLine.join(" ")} ${e.city}, ${e.region} ${r}`}return n}static supportedLocalesOf(e,t={}){}}const N=new WeakMap,A=e=>String(e),P=new Map([["billingAddress",e=>new _(e)],["cardholderName",A],["cardNumber",A],["cardSecurityCode",A],["expiryMonth",A],["expiryYear",A]]),D=new Map([["American Express",[34,37]],["CARDGUARD EAD BG ILS",[5392]],["China UnionPay",[62]],["Dankort",[5019]],["Diners Club",[[300,305],309,36,[38,39]]],["Discover Card",[6011,[622126,622925],[644,649],65]],["JCB",[[3528,3589]]],["Maestro",[50,[56,58],6]],["MasterCard",[[2221,2720],[51,55]]],["MIR",[[2200,2204]]],["UATP",[1]],["Verve",[[506099,506198],[650002,650027]]],["Visa",[4]]]);class j{constructor(e){const t=N.set(this,new Map).get(this);if("object"!=typeof e)throw TypeError("Expected object for details");if("cardNumber"in e==!1)throw TypeError("cardNumber member is required");if("billingAddress"in e&&!(e.billingAddress instanceof _))throw TypeError("Expected billingAddress to be a PaymentAddress");Array.from(P.entries()).filter(([t])=>t in e).reduce((n,[r,i])=>t.set(r,i(e[r])),t)}get cardholderName(){return N.get(this).get("cardholderName")}get cardNumber(){return N.get(this).get("cardNumber")}get expiryMonth(){return N.get(this).get("expiryMonth")}get expiryYear(){return N.get(this).get("expiryYear")}get cardSecurityCode(){return N.get(this).get("cardSecurityCode")}get billingAddress(){return N.get(this).get("billingAddress")}static isValid(e){if(!1===/^\d+$/.test(e))return!1;let t=0,n=0,r=!1;for(var i=e.replace(/\D/g,""),o=i.length-1;o>=0;o--){var a=i.charAt(o);n=parseInt(a,10),r&&(n*=2)>9&&(n-=9),t+=n,r=!r}return t%10==0}static getCardNetwork(e){const t=Array.from(D.entries()).find(([,t])=>t.find(t=>Array.isArray(t)?function(e,[t,n]){if(t>n)throw RangeError("start greater than end?");for(;t<=n;){if(e.startsWith(String(t)))return!0;t++}return!1}(e,t):e.startsWith(t)));return t?t[0]:""}}window.pp=j;const I=new WeakMap,L=new Set(["uuid","cardholderName","cardNumber","cardSecurityCode","expiryMonth","expiryYear"]),$=Object.freeze({cancelLabel:"Cancel",proceedLabel:"Preview"});class B extends m{constructor(e){super(L,["credit-card-collector"],"cards",function(){const e=Array.from(L).reduce((e,t)=>(e[t]="",e),{});return e.uuid=u()(),e}()),I.set(this,new Map).get(this).set("addressCollector",e)}get buttonLabels(){return $}toBasicCardResponse(){const e=this.toObject();return new j(e)}async save(){this.form.querySelector("[name=cardNumber]").validity.valid&&await super.save()}render(){const e=I.get(this).get("addressCollector").toPaymentAddress(),t=(new T).format(e,"html"),n=(new Date).getFullYear(),{cardholderName:r,cardNumber:i,expiryMonth:o,expiryYear:a,uuid:s}=this.data;return this.renderer`
      <section class="credit-card-details">
        <h3 class="fullspan">Enter payment details</h3>
        <input 
          type="hidden"
          name="uuid"
          value="${s}">
        <input
          autocomplete="cc-number"
          inputmode="numeric"
          class="fullspan"
          maxlength="19"
          name="cardNumber"
          onchange="${function(e){const{target:t}=e;if(j.isValid(t.value))return void t.setCustomValidity("");t.setCustomValidity("Invalid credit card number")}}"
          pattern="[0-9]{13,16}"
          placeholder="Card Number"
          required
          type="text"
          value="${i||"4111111111111111"}">
        <input
          type="text"
          minlength="1"
          class="fullspan"
          name="cardholderName"
          required
          placeholder="Name on card"
          autocomplete="cc-name"
          value="${r}">
        <select 
          name="expiryMonth"
          placehoder="exp.MM" 
          maxlength="2">${R(1,12,parseInt(o,10))}</select>
        <select 
          name="expiryYear" 
          placehoder="exp.YY" 
          maxlength="2">${R(n,n+10,parseInt(a,10))}</select>
        <input
          inputmode="numeric"
          maxlength="4"
          minlength="3"
          name="cardSecurityCode"
          onkeyup="${({target:e})=>{let t;t=e.validity.valid&&e.form.checkValidity()?new CustomEvent("datacollected",{detail:this.toObject()}):new CustomEvent("invaliddata"),this.dispatchEvent(t)}}"
          placeholder="CVV"
          size="4"
          type="text">
        <label class="fullspan">
          <input type="checkbox" name="saveDetails" checked>
          Save the credit card (CVV will not be saved)
        </label>
      </section>
      <section class="billing-address-info">
        <h3>Enter billing address</h3>
          <label>
            <input type="checkbox" name="" checked>
            Same as shipping address
          </label>
          <p class="payment-sheet-billing-address">${t}</p>
      </section>
    `}}function R(e,t,n=null){const r=[];if(e>t){let n=e;e=t,t=n}for(;e<=t;){const t=n===e;r.push(Object(i["wire"])()`
      <option value="${e}" selected="${t}">
        ${e}
      </option>
    `),e++}return r}const q=Object.freeze({cancelLabel:"Cancel",proceedLabel:"Continue",nextSheet:null}),F=new WeakMap;class U extends EventTarget{constructor(e=q){super();const t=F.set(this,new Map).get(this),n=document.createElement("section");n.classList.add("paysheet-controls"),t.set("canContinue",!1),t.set("labels",e),t.set("renderer",Object(i.bind)(n))}activate(){F.get(this).set("canContinue",!0),this.render()}deactivate(){F.get(this).set("canContinue",!1),this.render()}render({cancelLabel:e,proceedLabel:t}=F.get(this).get("labels")){const n=F.get(this),r=n.get("renderer");return r`
      <button type="button" class="cancel" onclick="${()=>{this.dispatchEvent(new CustomEvent("cancel"))}}">
        ${e}
      </button>
      <button type="submit" class="continue" onclick="${()=>{this.dispatchEvent(new CustomEvent("continue"))}}" disabled="${!n.get("canContinue")}">
        ${t}
      </button>
    `}}const K=new WeakMap;class V extends EventTarget{constructor(e,t,n={userMustChoose:!1}){super();const r=K.set(this,new Map).get(this),o=document.createElement("form");r.set("form",o),t.dataSheet=this;const a=new U(t.buttonLabels);a.addEventListener("continue",()=>{this.dispatchEvent(new CustomEvent("continue"))}),a.addEventListener("cancel",()=>{this.dispatchEvent(new CustomEvent("abort",{detail:{reason:"User aborted."}}))}),o.classList.add("payment-sheet-data-collector");const s=async()=>{this.validate(),await t.save()};o.addEventListener("keyup",s),o.addEventListener("change",async()=>{await s();const e=this.collectedData,t=new CustomEvent("change",{detail:e});this.dispatchEvent(t)}),o.addEventListener("submit",e=>(e.preventDefault(),!1)),t.addEventListener("invaliddata",this.validate.bind(this));const c=t.ready.then(()=>(this.render(),this));r.set("controlButtons",a),r.set("dataCollector",t),r.set("heading",e),r.set("renderer",Object(i.bind)(o)),r.set("ready",c),r.set("userMustChoose",n.userMustChoose)}get userMustChoose(){return K.get(this).get("userMustChoose")}requestDisplay(e){const t={detail:{sheet:this,nextSheet:e}};this.dispatchEvent(new CustomEvent("requestdisplay",t))}get collectedData(){return K.get(this).get("dataCollector").toObject()}get form(){return K.get(this).get("form")}get ready(){return K.get(this).get("ready")}get isValid(){return K.get(this).get("form").checkValidity()}validate(){const e=K.get(this),t=e.get("controlButtons");e.get("form").checkValidity()?t.activate():t.deactivate()}reset(){K.get(this).get("dataCollector").form.reset()}render(e){const t=K.get(this),n=t.get("dataCollector"),r=t.get("renderer"),i=t.get("heading"),o=t.get("controlButtons");return r`
    <h2 hidden="${!i}">
      ${i}
    </h2>
    <section>${n.render(e)}</section>
    <section>${o.render(n.buttonLabels)}</section>`}}const W=new WeakMap;class G extends EventTarget{constructor(e){super();const t=W.set(this,new Map).get(this);t.set("dataSheets",e.concat()),e.forEach(function(e){e.addEventListener("continue",function(){const e=W.get(this).get("dataSheets"),t=e.slice(e.findIndex(e=>e===this.active)+1).find(e=>!e.isValid||e.userMustChoose);if(t){this.active=t;const e={detail:{activeSheet:t}};return void this.dispatchEvent(new CustomEvent("update",e))}this.active=null;const n={detail:e.map(e=>e.collectedData).reduce((e,t)=>Object.assign(e,t),{})};this.dispatchEvent(new CustomEvent("done",n))}.bind(this)),e.addEventListener("abort",()=>{this.dispatchEvent(new CustomEvent("abort"))}),e.addEventListener("requestdisplay",e=>{this.active=e.detail.sheet;const t={detail:{activeSheet:e.detail.sheet}};this.dispatchEvent(new CustomEvent("update",t))})}.bind(this));const n=Promise.all(e.map(({ready:e})=>e));t.set("ready",n.then(()=>this)),n.then(e=>{this.active=e.find(e=>!e.isValid)})}get sheets(){return W.get(this).get("dataSheets")}get ready(){return W.get(this).get("ready")}get active(){return W.get(this).get("active")}set active(e){return W.get(this).set("active",e)}get done(){return null===this.active}reset(){const e=W.get(this).get("dataSheets");e.forEach(e=>e.reset()),this.active=e.find(e=>!e.isValid)||e[e.length-1]}update(e){W.get(this).get("dataSheets").forEach(t=>t.render(e))}}var z=n(15),H=n.n(z);const Y=new WeakMap;class Z extends EventTarget{constructor(e,t=!0){super();const n=Y.set(this,new Map).get(this);this.active=t,n.set("renderer",Object(i.bind)(e)),n.set("element",e),n.set("disabled",!1)}set request(e){Y.get(this).set("request",e)}get request(){return Y.get(this).get("request")}disable(){Y.get(this).set("disabled",!0),this.render()}enable(){Y.get(this).set("disabled",!1),this.render()}get isDisabled(){return Y.get(this).get("disabled")}get renderer(){return Y.get(this).get("renderer")}get active(){return Y.get(this).get("active")}set active(e){return Y.get(this).set("active",Boolean(e))}get element(){return Y.get(this).get("element")}render(){throw new Error("Abstact method.")}}const J=new WeakMap;class Q extends Z{constructor(){super();const e=J.set(this,new Map).get(this),t=document.createElement("section");t.id="payment-sheet-host",e.set("renderer",Object(i.bind)(t))}render(){const e=J.get(this).get("renderer");return e`<p>Requested by <span>${window.location.host}</span></p>`}}const X=new WeakMap,ee=/(^\w*)\$(\d*\.*\d*)/,te=/[A-Z]{3}/,ne=/^-?[0-9]+(\.[0-9]+)?$/;class re{constructor(e,t){const n={currency:e,value:t};if(re.checkAndCanonicalize(n),!re.isValid(t))throw TypeError("Invalid decimal monetary value");const r=X.set(this,new Map).get(this);r.set("currency",n.currency),r.set("value",n.value),r.set("formatter",new Intl.NumberFormat(navigator.languages,{style:"currency",currency:e,currencyDisplay:"symbol"}))}get currency(){return X.get(this).get("currency")}set currency(e){if(!te.test(e))throw new RangeError("Invalid currency code");return X.get(this).set("currency",e)}get value(){return X.get(this).get("value")}toString(){return X.get(this).get("formatter").format(this.value)}toObject(){return{currency:this.currency,value:this.value}}static checkAndCanonicalize(e){const{currency:t,value:n}=e;if(!te.test(t.toLocaleUpperCase()))throw new RangeError("Invalid currency code");if(!re.isValid(n))throw new RangeError("Invalid currency value");e.currency=t.toUpperCase()}static checkAndCanonicalizeTotal(e){if(re.checkAndCanonicalize(e),e.amount.startsWith("-"))throw TypeError("Total amount can't be a negative number.")}static parseAmount(e){const[,t,n]=ee.exec(e);return new re(t,n)}static isValid(e){return ne.test(e)}static isPositive(e){return re.isValid(e)&&"-"!==e[0]}}const ie=new WeakMap;class oe extends Z{constructor(){super(document.createElement("details")),ie.set(this,new Map).get(this),this.element.id="payment-sheet-line-items"}render(){ie.get(this);const e=this.request[rt].displayItems;return this.renderer`
      <summary>
        View All Items
      </summary>
      <table id="line-items-table">${e.map(ae).length?e.map(ae):Object(i["wire"])(e)`<tr><td colspan="2">No line items</td></tr>`}</table>
    `}}function ae(e){const{amount:{currency:t,value:n}}=e,r=new re(t,n).toString();return Object(i["wire"])(e)`<tr>
     <td lang="${e.lang}" dir="${e.dir}">
       ${e.label}
     </td>
     <td>
       ${r} ${t}
     </td>
   </tr>
  `}class se extends Z{constructor(){super(document.createElement("table")),this.element.id="payment-sheet-shipping-options",this.addEventListener("statechange",()=>{this.render()})}render(){const e=this.request[rt].shippingOptions;if(!e||0===e.length)return;e!==this.shippingOptions&&(this.shippingOptions=e);const t=function({amount:e}){return Object(i["wire"])()`
    <output>
      ${e.toString()}
    </output>
  `}(e.find(({selected:e})=>e)),n=e.map(ce);return this.renderer`
    <tr>
      <td colspan="2">
        <label>
          Shipping:
          <select onchange="${({target:e})=>{const n=e.item(e.selectedIndex);t.value=n.textContent;const r={detail:{shippingOption:n.value}},i=new CustomEvent("shippingoptionchange",r);this.dispatchEvent(i)}}" disabled="${this.isDisabled?"disabled":null}">
            ${n}
          </select>
        </label>
      </td>
    </tr>`}}function ce(e){const{id:t,selected:n,label:r,dir:o,lang:a,amount:{currency:s,value:c}}=e;return Object(i["wire"])(e)`
    <option
      dir="${o}"
      lang="${a}"
      name="shippingOption"
      selected="${n}"
      value="${t}">
        ${r}
        ${new re(s,c).toString()}
    </option>
  `}const ue=new WeakMap;class le extends Z{constructor(){super(document.createElement("section")),this.element.id="payment-sheet-total"}render(){const{total:e}=this.request[rt],{amount:t,dir:n,lang:r,label:i}=e,{currency:o,value:a}=t;return this.renderer`
      <table id="payment-sheet-total">
        <tr>
          <td colspan="2">
            <span dir="${n}" lang="${r}">
              ${i}
            </span>:
            <output id="payment-sheet-total">
              ${new re(o,a).toString()} 
              <span class="currency-code">
                ${o}
              </span>
            </output>
          </td>
        </tr>
      </table>`}get containerElem(){return ue.get(this).get("containerElem")}}const de=new Intl.DateTimeFormat(navigator.languages,{month:"2-digit",year:"2-digit"}),he=new WeakMap,fe=new Set([]),pe=Object.freeze({cancelLabel:"Cancel",proceedLabel:"Pay"}),me=Object.freeze({options:{requestShipping:!1}});class ge extends m{constructor(e,t,n){super(fe,["payment-confirmation-collector"],"",null,"hold");const r=he.set(this,new Map).get(this);r.set("addressCollector",e),r.set("creditCardCollector",t),r.set("payerDetailsCollector",n)}get buttonLabels(){return pe}get collectedData(){}render(e=me){const{options:{requestShipping:t}}=e,n=he.get(this),r=n.get("addressCollector"),i=n.get("creditCardCollector"),o=r.toPaymentAddress(),a=i.toBasicCardResponse(),s=(new T).format(o,"text"),c=j.getCardNetwork(a.cardNumber),u="./payment-sheet/images/icons/"+function(e){const t=j.getCardNetwork(e.cardNumber).toLowerCase().replace(/\s/g,"-");if(!t)return"unknown.svg";return t+".svg"}(a),l=a.cardNumber.substr(-4),d=new Date;d.setFullYear(a.expiryYear),d.setMonth(a.expiryMonth);const h=de.format(d),f=ye(r,this.dataSheet),p=ye(i,this.dataSheet),m=a.cardSecurityCode?"hidden":"text";return this.renderer`
      <section class="shipping-summary" hidden="${!t}">
        <h3>Ship To: 
          <button 
            onclick="${f}" 
            aria-label="Change shipping type">
              change
          </button>
        </h3>
        <p>
          ${s}
        </p>
      </section>
      <section class="card-summary">
        <h3>Card Info:
          <button 
            onclick="${p}" 
            aria-label="Change payment type">
              change
          </button>
        </h3>
        <p>
          <img height="30" src="${u}" alt="${c}">
          <span class="ccdigits">
            ${l}
          </span>
          <abbr title="Expires">EXP.</abbr>
          <time>
            ${h}
          </time>
          <input
            value="${a.cardSecurityCode}" 
            inputmode="numeric" 
            maxlength="4" 
            minlength="3" 
            name="cardSecurityCode" 
            placeholder="CVV" 
            size="4" 
            type="${a.cardSecurityCode?"hidden":"text"}" 
            onkeyup="${({target:e})=>{let t;t=e.validity.valid&&e.form.checkValidity()?new CustomEvent("datacollected",{detail:this.toObject()}):new CustomEvent("invaliddata"),this.dispatchEvent(t)}}" 
            autofocus="${"text"===m}" 
            required="${"text"===m}" >
        </p>
        <p class="cardholderName">
          ${a.cardholderName}
        </p>
      </section>
    `}}function ye(e){return t=>{t.preventDefault(),e.dataSheet.requestDisplay()}}const ve=new WeakMap;class be extends Z{constructor(){super();const e=ve.set(this,new Map).get(this),t=document.createElement("section");t.classList.add("await-payment-response"),e.set("renderer",Object(i.bind)(t))}render(){const e=ve.get(this).get("renderer");return e`
        <img src="./payment-sheet/images/ring.svg" width="100" height="100">
        <p class="action">Processing…</p>
        <p>Please do not close the browser</p>
    `}}const we=new Set(["payerEmail","payerName","payerPhone","uuid"]),Ee=Object.freeze({cancelLabel:"Cancel",proceedLabel:"Proceed"});class _e extends m{constructor(){const e={payerEmail:"",payerName:"",payerPhone:"",uuid:u()()};super(we,["payer-details-collector"],"payers",e)}get buttonLabels(){return Ee}async save(){[...this.form.querySelectorAll("input")].every(({validity:{valid:e}})=>e)&&await super.save()}render(){const{payerEmail:e,payerName:t,payerPhone:n}=this.data;return this.renderer`
      <section class="payer-details">
        <input
          autocomplete="name"
          inputmode="text"
          class="fullspan"
          name="payerName"
          placeholder="Full name"
          required
          type="text"
          value="${t}">
        <input
          autocomplete="email"
          inputmode="email"
          class="fullspan"
          name="payerEmail"
          placeholder="Email address"
          required
          type="email"
          value="${e}">
        <input
          type="tel"
          minlength="3"
          class="fullspan"
          name="payerPhone"
          required
          placeholder="Phone number"
          autocomplete="phone"
          value="${n}">
        <label class="fullspan">
          <input type="checkbox" name="saveDetails" checked>
          Save your details
        </label>
      </section>
    `}}const xe=new WeakMap;function Se(e){xe.get(e).set("sessionPromise",new o)}var Ce=new class extends EventTarget{constructor(){super(),console.log("Creating payment sheet");const e=xe.set(this,new Map).get(this);(function(){const e=xe.get(this),t=document.createElement("dialog");H.a.registerDialog(t),t.id="payment-sheet",t.addEventListener("cancel",()=>{const t=new Event("userabort"),n=new DOMException("User aborted dialog","AbortError");e.get("sessionPromise").reject(n),e.set("isShowing",!1),this.dispatchEvent(t)}),e.set("dialog",t),e.set("renderer",Object(i.bind)(t)),e.set("isShowing",!1)}).call(this),e.set("host-widget",new Q);const t=new se;t.addEventListener("shippingoptionchange",({detail:e})=>{this.dispatchEvent(new CustomEvent("shippingoptionchange",{detail:e}))});const n=new Map;n.set("lineItems",{widget:new oe,active:!0}),n.set("shippingOptionsPicker",{widget:t,active:!0}),n.set("total",{widget:new le,active:!0}),n.set("awaitPaymentResponse",{widget:new be,active:!1}),e.set("topWidgets",n),e.set("ready",(async()=>(await async function(e){console.log("Initializing PaymentSheet");const t=xe.get(e),n=await new k("shipping").ready;console.log("AddressCollector READY!"),n.addEventListener("shippingaddresschange",({detail:t})=>{e.dispatchEvent(new CustomEvent("shippingaddresschange",{detail:t}))});const r=await new B(n).ready;console.log("creditCardCollector READY!");const i=await new ge(n,r).ready,o=new V("Shipping address:",n),a=new V("Payer Details",new _e),s=[a,o,new V("",r),new V("",i,{userMustChoose:!0})];a.addEventListener("change",({detail:t})=>{const n=new CustomEvent("payerdetailschange",{detail:t});e.dispatchEvent(n)}),o.addEventListener("continue",()=>{n.notifyAddressChange()});const c=await new G(s).ready;c.addEventListener("update",async()=>{console.log("showing new sheet..."),await e.render()}),c.addEventListener("abort",async()=>{e.abort("User aborted")}),console.log("dataSheetManager READY!"),t.set("dataSheetManager",c),c.addEventListener("done",async({detail:e})=>{const n=t.get("topWidgets");Array.from(n.values()).forEach(e=>e.active=!1),n.get("awaitPaymentResponse").active=!0,t.get("sessionPromise").resolve({collectedData:e,methodName:"baic-card"})})}(this),this))())}get sessionDone(){return xe.get(this).get("sessionPromise").promise}get ready(){return xe.get(this).get("ready")}async abort(e){console.log("aborting",e),await this.close()}async retry(){console.log("Retry!");const e=xe.get(this);Se(this);const t=e.get("dataSheetManager"),[n]=t.sheets;t.active=n;const r=e.get("topWidgets");return Array.from(r.values()).forEach(e=>e.active=!0),r.get("awaitPaymentResponse").active=!1,await this.update(),this.sessionDone}async open(e){const t=xe.get(this),n=t.get("dialog");if(t.get("isShowing"))throw new DOMException("Sheet is already showing","AbortError");const r=t.get("topWidgets");for(const{widget:t}of r.values())t.request=e;return n.isConnected||await function(e){return new Promise(t=>{var n=()=>(document.body.appendChild(e),t());"complete"!==document.readyState?window.addEventListener("DOMContentLoaded",n):n()})}(n),t.set("request",e),t.set("isShowing",!0),Se(this),n.showModal(),await this.render(),this.sessionDone}async update(){await this.render()}async requestClose(e){switch(xe.get(this),e){case"fail":case"abort":case"success":case"unknown":break;default:console.assert(!1,"This should never happen: "+e)}await this.close()}async close(){const e=xe.get(this),t=e.get("dialog");t.hasAttribute("open")||t.setAttribute("open","");try{t.close()}catch(e){console.warn("Dialog didn't close correctly",e)}t.remove(),e.set("isShowing",!1)}disableInputs(){const e=xe.get(this).get("topWidgets");for(const{widget:t}of e.values())t.disable()}enableInputs(){console.log("...ENABLING INPUTS AGAIN...");const e=xe.get(this).get("topWidgets");for(const{widget:t}of e.values())t.enable()}async render(){await this.ready;const e=xe.get(this),t=e.get("request"),{displayItems:n,total:r,shippingOptions:i}=t[rt],o={displayItems:n,options:t[it],shippingOptions:i,total:r},a=e.get("renderer"),s=e.get("topWidgets"),c=e.get("host-widget"),u=e.get("dataSheetManager").active;a`
      <h1>
        <img src="./payment-sheet/images/logo-payment.png" alt=""> Firefox Web Payment
      </h1>
      <section id="payment-sheet-top-section">${[...s.values()].filter(({active:e})=>e).map(({widget:e})=>e.render(o))}</section>
      <section id="payment-sheet-data-sheet" hidden="${!u}">${u?u.render(o):""}</section>
      <section id="payment-sheet-bottom">${c.render(window.location)}<section>
    `,u&&await u.validate()}};const Oe=Symbol("[[complete]]"),Me=Symbol("[[methodName]]"),ke=Symbol("[[details]]"),Te=Symbol("[[payerEmail]]"),Ne=Symbol("[[payerName]]"),Ae=Symbol("[[payerPhone]]"),Pe=Symbol("[[request]]"),De=Symbol("[[retrying]]"),je=Symbol("[[retryPromise]]"),Ie=Object.freeze(["fail","success","unknown"]);class Le extends EventTarget{constructor(e,{methodName:t="basic-card"}){super(),this[Pe]=e,this[De]=!1,this[Oe]=!1,this[Me]=t,this[je]=void 0,this[Te]=null,this[Ne]=null,this[Ae]=null}get requestId(){return this[Pe].id}get methodName(){return this[Me]}get details(){return this[ke]}get shippingAddress(){return this[Pe].shippingAddress}get shippingOption(){return this[Pe].shippingOption}get payerName(){return this[Ne]}get payerEmail(){return this[Te]}get payerPhone(){return this[Ae]}async complete(e="unknown"){if(!Ie.includes(e))throw new TypeError("Invalid argument value: "+e);if(this[Oe])throw new DOMException("Response already completed","InvalidStateError");this[Oe]=!0,await Ce.requestClose(e)}async retry(e={}){const t=this[Pe];if(this[Oe])throw new DOMException("Payment response completed","InvalidStateError");if(this[De])throw new DOMException("Already retrying","InvalidStateError");const{requestPayerName:n,requestPayerPhone:r,requestPayerEmail:i}=t[it],a=({detail:e})=>{!function(e,t){const{payerName:n,payerEmail:r,payerPhone:i}=t;if(null===e[ut])return void console.assert("There should always be a response here");const o=e[ut];console.assert(o[De],"Must be in a retry"),console.assert(!1===e[ct],"Must not be updating!"),console.assert("interactive"===e[st],"Request must be interactive"),o.payerName!==n&&(console.assert(e[it].requestPayerName,"Unexpected change to payer name"),o[Ne]=n);o.payerEmail!==r&&(console.assert(e[it].requestPayerEmail,"Unexpected change to payer email"),o[Te]=r);o.payerPhone!==i&&(console.assert(e[it].requestPayerPhone,"Unexpected change to payer phone"),o[Ae]=i);const a=new tt("payerdetailchange");o.dispatchEvent(a),Ce.disableInputs()}(t,e)};(n||r||i)&&Ce.addEventListener("payerdetailschange",a),this[De]=!0,t[st]="interactive";const s=new o;this[je]=s;const c=Ce.retry(e);try{await mt(t,c)}catch(e){}finally{this[De]=!1,Ce.removeEventListener("payerdetailschange",a)}return s.promise}toJSON(){return JSON.stringify({requestId:this.requestId,methodName:this.methodName,details:{...this.details},shippingAddress:this.shippingAddress.toJSON(),shippingOption:this.shippingOption,payerName:this.payerName,payerEmail:this.payerEmail,payerPhone:this.payerPhone})}}window.PaymentResponse=Le;const $e={writable:!0,enumerable:!0,configurable:!0};class Be{toObject(e=this){if(e instanceof Be==!1)return{};const t=Object.getOwnPropertyNames(e).filter(e=>"constructor"!==e).sort().map(e=>{let t=null===this[e]?void 0:this[e];return t instanceof Be&&(t=t.toObject()),{key:e,value:t}}).reduce((e,{key:t,value:n})=>(Object.defineProperty(e,t,Object.assign({value:n},$e)),e),{});return Object.assign(t,this.toObject(Object.getPrototypeOf(e)))}}const Re=new WeakMap;class qe extends Be{constructor(e){super();const{displayItems:t,shippingOptions:n,modifiers:r}=e;Re.set(this,{displayItems:t,shippingOptions:n,modifiers:r})}get displayItems(){return Re.get(this).displayItems}get shippingOptions(){return Re.get(this).shippingOptions}get modifiers(){return Re.get(this).modifiers}}const Fe=new WeakMap;class Ue extends Be{constructor(e="",t="auto"){super();const n=Fe.set(this,new Map).get(this);n.set("lang",e),n.set("dir",t)}get lang(){return Fe.get(this).get("lang")}get dir(){return Fe.get(this).get("dir")}toObject(){return{dir:this.dir,lang:this.lang}}}const Ke=new WeakMap;class Ve extends Ue{constructor(e,t){if(super(),!(t instanceof re))throw new TypeError("Amount must be a PaymentCurrencyAmount");const n=Ke.set(this,new Map).get(this);n.set("label",String(e)),n.set("amount",t)}get label(){return Ke.get(this).get("label")}get amount(){return Ke.get(this).get("amount")}toObject(){return Object.assign(super.toObject(),{label:this.label,amount:this.amount.toObject()})}}const We=new WeakMap;class Ge extends Ve{constructor(e,t,n=!1){if(void 0===e)throw new TypeError("Label is required.");if(void 0===t)throw new TypeError("amount is required.");super(e,t),We.set(this,new Map).get(this).set("pending",Boolean(n))}get pending(){return We.get(this).get("pending")}toObject(){return Object.assign(super.toObject(),{pending:this.pending})}}const ze=new WeakMap;class He extends qe{constructor(e){let t;if(e.total){const{label:n}=e.total,{currency:r,value:i}=e.total.amount,o=new re(r,i);t=new Ge(n,o)}const{error:n}=e;super(e),ze.set(this,{error:n,total:t})}get error(){return ze.get(this).error}get total(){return ze.get(this).total}static convert(e){return e}}const Ye=new WeakMap,Ze=[{name:"basic-card",value:"visa",icons:[{src:"./payment-sheet/images/visa.svg",sizes:"256x256"}]},{name:"https://paypal.com",value:"paypal",icons:[{src:"./payment-sheet/images/paypal.svg",sizes:"256x256"}]}],Je=new Set(["payment-method"]);class Qe extends m{constructor(e=Ze){super(Je,["payment-method-chooser"],null,{"payment-method":"visa"}),Ye.set(this,new Map).get(this).set("paymentMethods",e)}render(){const e=Ye.get(this).get("paymentMethods");return e.length?this.renderer`
      <div id="payment-methods-buttons">${e.map(e=>(function(e){const{name:t,icons:n,value:r}=e,o=function(e){const{srcset:t,alt:n}=e;return Object(i["wire"])(e)`<img
     tabindex="0"
     alt="${n}"
     srcset="${t.join(" ")}"
     width="195" 
     height="80">
  `}({srcset:n.map(Xe),name:t});return Object(i["wire"])(e)`
    <label onkeypress="${e=>{32!==e.keyCode&&13!==e.keyCode||(e.currentTarget.setAttribute("aria-checked","true"),e.currentTarget.querySelector("input").checked=!0,e.currentTarget.querySelector("input").form.dispatchEvent(new Event("change")),e.preventDefault())}}" role="radio" aria-checked="false">
    <input required value="${r}" required name="payment-method" type="radio">${o}</label>`})(e))}</div>
    `:this.renderer`
        <h2>
          No payment methods available.
        </h2>
      `}static supports(e){return Ze.some(({name:t})=>t===e)}}function Xe({src:e,sizes:t}){return t.split(" ").map(e=>e.split("x")[0]+"w").reduce((t,n)=>(t.push(`${e} ${n}`),t),[]).sort().join()}const et=Symbol("[[waitForUpdate]]");class tt extends Event{constructor(e){super(e),this[et]=!1}updateWith(e){if(this.isTrusted||console.warn("Event is not trusted - would normally throw here"),this[et])throw new DOMException("Already waiting for update","InvalidStateError");const t=this.target instanceof Le?this.target[Pe]:this.target;if("interactive"!==t[st])throw new DOMException("Sheet is not interactive","InvalidStateError");if(t[ct])throw new DOMException("Sheet is already updating","InvalidStateError");this.stopPropagation(),this.stopImmediatePropagation(),this[et]=!0,t[ct]=!0,wt(e,t).catch(console.error)}}window.PaymentRequestUpdateEvent=tt;const nt=Object.freeze({requestPayerEmail:!1,requestPayerName:!1,requestPayerPhone:!1,requestShipping:!1,shippingType:"shipping"}),rt=Symbol("[[details]]"),it=Symbol("[[options]]"),ot=Symbol("[[serializedMethodData]]"),at=Symbol("[[serializedMethodData]]"),st=Symbol("[[state]]"),ct=Symbol("[[updating]]"),ut=Symbol("[[response]]"),lt=Symbol("disableForm"),dt=Symbol("[[acceptPromise]]"),ht=Symbol("[[selectedShippingOption]]"),ft=Symbol("[[shippingAddressSymbol]]");class pt extends EventTarget{constructor(e,t,n){if(super(),"object"!=typeof n)throw TypeError("invalid options argument");const r=Object.assign({},nt,n),i=e.concat(),o=Object.assign({},t),a=new Map;if(void 0===o.id&&(o.id=u()()),0===i.length)throw new TypeError("At least one payment method is required");for(const e of i){if(0===e.supportedMethods.length)throw new TypeError("Each payment method needs to include at least one payment method identifier");let t=e.data?JSON.strigify(e.data):null;a.set(e.supportedMethods.concat(),t)}if(!re.isValid(o.total.amount.value))throw new TypeError("The value of total is invalid.");if(!re.isPositive(o.total.amount.value))throw new TypeError("total can't be negative.");if("displayItems"in o)for(const e of o.displayItems)if(!re.isValid(e.amount.value))throw new TypeError("A currency value of displayItems is invalid");const{selectedShippingOption:s,shippingOptions:c}=vt(o);o.shippingOptions=c;const{modifiers:l,serializedModifierData:d}=yt(o);o.modifiers=l,this[rt]=o,this[it]=r,this[ot]=a,this[at]=d,this[st]="created",this[ct]=!1,this[ft]=null,this[ht]=s,this[ut]=null}[lt](){Ce.disableInputs()}get id(){return this[rt].id}get shippingAddress(){return this[ft]}get shippingOption(){return this[ht]}get shippingType(){const{shippingType:e}=this[it];return e||null}async show(e){if("created"!==this[st])throw new DOMException("Payment request was already used","InvalidStateError");if(window.top.document.hasFocus()||console.info(new DOMException("Top window must be focused to call .show()","SecurityError")),this[st]="interactive",this[dt]=new o,![...this[ot].keys()].reduce((e,t)=>e.concat(t),[]).filter(Qe.supports).length){const e=new DOMException("No supported payment methods found.","NotSupportedError");this[dt].reject(e)}Ce.addEventListener("userabort",async()=>{!function(e){console.assert(!1===e[ct],"This should never happen"),console.assert("interactive"===e[st],"UA should ensure that this never occurs."),e[st]="closed";const t=new DOMException("User aborted payment request","AbortError"),n=e[ut];n?(console.assert(n[De]),n[je].reject(t)):e[dt].reject(t)}(this)}),Ce.addEventListener("shippingoptionchange",e=>{console.log("shippingoptionchange event"),this[ht]=e.detail.shippingOption,gt(this,"shippingoptionchange")}),Ce.addEventListener("shippingaddresschange",e=>{console.log("shippingaddresschange event"),this[ft]=e.detail.shippingAddress,gt(this,"shippingaddresschange")});try{const t=Ce.open(this);e&&await wt(e,this),await mt(this,t)}catch(e){this[dt].reject(e)}return this[dt].promise}async abort(){if("interactive"!==this[st])throw new DOMException("Payment request was already consumed","InvalidStateError");return new Promise(async(e,t)=>{try{await Ce.requestClose("abort")}catch(e){return void t(new DOMException("Could not abort at this time","InvalidStateError"))}this[st]="closed";const n=new DOMException("Payment request was aborted","AbortError");this[dt].reject(n),e(void 0)})}async canMakePayment(){if("interactive"!==this[st])throw new DOMException("Payment request was already consumed","InvalidStateError");return Array.from(this[ot].keys()).reduce((e,t)=>e.concat(t),[]).some(Qe.supports)}}async function mt(e,t){if(await t,e[ct])return void console.assert(!1,"This should never happen: in [[updating]] state");if("interactive"!==e[st])return void console.assert(!1,"The user agent user interface should ensure that this never occurs.");if(e[it].requestShipping&&(null===e.shippingAddress||null===e.shippingOption))return void console.assert(!1,"Either shippingAddress or shippingOption was null");const n=!!e[ut],r=await t,i=n?e[ut]:new Le(e,r);!function(e,t,n){const{requestPayerName:r,requestPayerPhone:i,requestPayerEmail:o}=t[it];e[Ne]=r?n.payerName:null,e[Ae]=i?n.payerPhone:null,e[Te]=o?n.payerEmail:null,e[ke]=n}(i,e,r),n?i[je].resolve(void 0):(e[ut]=i,e[dt].resolve(i)),e[st]="closed"}function gt(e,t){console.assert(!e[ct],"This should never happen"),console.assert("interactive"===e[st],"The user agent user interface should ensure that this never occurs.");const n=new tt(t);e.dispatchEvent(n)}function yt({modifiers:e}){if(!e)return{};let t=[],n=e.concat();for(const e of n){const{total:n,additionalDisplayItems:r,data:i}=e;if(n){if(!re.isValid(n.amount.value))throw new TypeError("A modifier monetary value is invalid.");if(!re.isPositive(n.amount.value))throw new TypeError("A modifier can't be negative.")}if(r)for(const e of r)if(re.isValid(e.amount.value))throw new TypeError("Invalid monetary value in additionalDisplayItems");const o=i?JSON.strigify(i):null;t.push(o),delete e.data}return{modifiers:n,serializedModifierData:t}}function vt({shippingOptions:e}){if(!e)return{};if(!e.every(({amount:{value:e}})=>re.isValid(e)))throw new TypeError("One of the ShippingOption monetary values is invalid.");const t=new Set(e),n=new Set;for(const r of e){if(n.has(r.id)){t.clear();break}n.add(r.id)}const r=Array.from(t).reverse().find(({selected:e})=>e);return{shippingOptions:[...t],selectedShippingOption:r?r.id:null}}Object(r.defineEventAttribute)(pt,"shippingoptionchange"),Object(r.defineEventAttribute)(pt,"shippingaddresschange");class bt{constructor(e,t){const n=this;this.defused=!1,this.promise=new Promise((r,i)=>{n.id=setTimeout(()=>i(new Error(t)),e)})}defuse(){if(this.defused)throw new Error("already defused.");this.defused=!0,clearTimeout(this.id)}}async function wt(e,t){Ce.disableInputs();const n=new bt(5e3,"Sheet timed out");let r;try{r=await Promise.race([n.promise,Promise.resolve(e)]),n.defuse()}catch(e){return Et(t,new DOMException(e.message,"AbortError"))}try{!function(e,t){"total"in t&&(e[rt].total=t.total);"displayItems"in t&&(e[rt].displayItems=t.displayItems);"shippingOptions"in t&&e[it].requestShipping&&(e[rt].shippingOptions=t.shippingOptions);e[ht]=t.selectedShippingOption,"modifiers"in t&&(e[rt].modifiers=t.modifiers,e[at]=t.serializedModifierData);e[it].requestShipping&&e[rt].shippingOptions.length}(t,function(e,t){const n={};e.total&&Object.assign(n,{total:e.total});if(e.displayItems){for(const t of e.displayItems)re.checkAndCanonicalize(t.amount);Object.assign(n,{...e.displayItems})}if(e.shippingOptions&&t[it].requestShipping){const t=vt(e);Object.assign(n,{...t})}if(e.modifiers){const t=yt(e);Object.assign(n,{...t})}return n}(new He(r).toObject(),t))}catch(e){return Et(t,e)}t[ct]=!1,Ce.update(),Ce.enableInputs()}async function Et(e,t){if(await Ce.abort(t.message),e[st]="closed",!!e[ut])e[dt].reject(t);else{const n=e[ut];console.assert(n[De]),n[je].reject(t)}e[ct]=!1}window.PaymentRequest=pt;const _t=document.defaultView,xt=1,St=/^area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr$/i,Ct="http://www.w3.org/2000/svg",Ot="connected",Mt="dis"+Ot,kt=/^style|textarea$/i,Tt="_hyper: "+(Math.random()*new Date|0)+";",Nt="\x3c!--"+Tt+"--\x3e";let At=_t.Event;try{new At("Event")}catch(e){At=function(e){const t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}}const Pt=_t.Map||function(){const e=[],t=[];return{get:n=>t[e.indexOf(n)],set(n,r){t[e.push(n)-1]=r}}};let Dt=0;const jt=_t.WeakMap||function(){const e=Tt+Dt++;return{get:t=>t[e],set(t,n){Object.defineProperty(t,e,{configurable:!0,value:n})}}},It=_t.WeakSet||function(){const e=new jt;return{add(t){e.set(t,!0)},has:t=>!0===e.get(t)}},Lt=Array.isArray||(e=>t=>"[object Array]"===e.call(t))({}.toString),$t=Tt.trim||function(){return this.replace(/^\s+|\s+$/g,"")};function Bt(){return this}const Rt=(e,t)=>{const n="_"+e+"$";return{get(){return this[n]||(this[e]=t.call(this,e))},set(e){Object.defineProperty(this,n,{configurable:!0,value:e})}}},qt={},Ft=[],Ut=qt.hasOwnProperty;let Kt=0;var Vt=(e,t)=>{e in qt||(Kt=Ft.push(e)),qt[e]=t},Wt=(e,t)=>{for(let n=0;n<Kt;n++){let r=Ft[n];if(Ut.call(e,r))return qt[r](e[r],t)}};const Gt=(e,t)=>zt(e).createElement(t),zt=e=>e.ownerDocument||e,Ht=e=>zt(e).createDocumentFragment(),Yt=(e,t)=>zt(e).createTextNode(t),Zt=" \\f\\n\\r\\t",Jt="[ "+Zt+"]+[^  \\f\\n\\r\\t\\/>\"'=]+",Qt="<([A-Za-z]+[A-Za-z0-9:_-]*)((?:",Xt="(?:=(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|[^  \\f\\n\\r\\t\\/>\"'=]+))?)",en=new RegExp(Qt+Jt+Xt+"+)([ "+Zt+"]*/?>)","g"),tn=new RegExp(Qt+Jt+Xt+"*)([ "+Zt+"]*/>)","g"),nn=Ht(document),rn="append"in nn,on="content"in Gt(document,"template");nn.appendChild(Yt(nn,"g")),nn.appendChild(Yt(nn,""));const an=1===nn.cloneNode(!0).childNodes.length,sn="importNode"in document,cn=rn?(e,t)=>{e.append.apply(e,t)}:(e,t)=>{const n=t.length;for(let r=0;r<n;r++)e.appendChild(t[r])},un=new RegExp("("+Jt+"=)(['\"]?)"+Nt+"\\2","gi"),ln=(e,t,n,r)=>"<"+t+n.replace(un,dn)+r,dn=(e,t,n)=>t+(n||'"')+Tt+(n||'"'),hn=(e,t)=>("ownerSVGElement"in e?bn:vn)(e,t.replace(en,ln)),fn=an?e=>{const t=e.cloneNode(),n=e.childNodes||[],r=n.length;for(let e=0;e<r;e++)t.appendChild(fn(n[e]));return t}:e=>e.cloneNode(!0),pn=sn?(e,t)=>e.importNode(t,!0):(e,t)=>fn(t),mn=[].slice,gn=e=>yn(e);let yn=e=>{if(e.propertyIsEnumerable("raw")||/Firefox\/(\d+)/.test((_t.navigator||{}).userAgent)&&parseFloat(RegExp.$1)<55){const e={};yn=(t=>{const n="_"+t.join(Tt);return e[n]||(e[n]=t)})}else yn=(e=>e);return yn(e)};const vn=on?(e,t)=>{const n=Gt(e,"template");return n.innerHTML=t,n.content}:(e,t)=>{const n=Gt(e,"template"),r=Ht(e);if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(t)){const e=RegExp.$1;n.innerHTML="<table>"+t+"</table>",cn(r,mn.call(n.querySelectorAll(e)))}else n.innerHTML=t,cn(r,mn.call(n.childNodes));return r},bn=on?(e,t)=>{const n=Ht(e),r=zt(e).createElementNS(Ct,"svg");return r.innerHTML=t,cn(n,mn.call(r.childNodes)),n}:(e,t)=>{const n=Ht(e),r=Gt(e,"div");return r.innerHTML='<svg xmlns="'+Ct+'">'+t+"</svg>",cn(n,mn.call(r.firstChild.childNodes)),n};function wn(e){this.childNodes=e,this.length=e.length,this.first=e[0],this.last=e[this.length-1]}wn.prototype.insert=function(){const e=Ht(this.first);return cn(e,this.childNodes),e},wn.prototype.remove=function(){const e=this.first,t=this.last;if(2===this.length)t.parentNode.removeChild(t);else{const n=zt(e).createRange();n.setStartBefore(this.childNodes[1]),n.setEndAfter(t),n.deleteContents()}return e};const En=(e,t,n)=>{e.unshift(e.indexOf.call(t.childNodes,n))};var _n=(e,t,n)=>({type:e,name:n,node:t,path:(e=>{const t=[];let n;switch(e.nodeType){case xt:case 11:n=e;break;case 8:n=e.parentNode,En(t,n,e);break;default:n=e.ownerElement}for(e=n;n=n.parentNode;e=n)En(t,n,e);return t})(t)}),xn=(e,t)=>{const n=t.length;for(let r=0;r<n;r++)e=e.childNodes[t[r]];return e};const Sn=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;const Cn=(e,t)=>{let n,r;return i=>{switch(typeof i){case"object":if(i){if("object"===n){if(!t&&r!==i)for(const t in r)t in i||(e[t]="")}else t?e.value="":e.cssText="";const o=t?{}:e;for(const e in i){const t=i[e];o[e]="number"!=typeof t||Sn.test(e)?t:t+"px"}n="object",t?e.value=kn(r=o):r=i;break}default:r!=i&&(n="string",r=i,t?e.value=i||"":e.cssText=i||"")}}},On=/([^A-Z])([A-Z]+)/g,Mn=(e,t,n)=>t+"-"+n.toLowerCase(),kn=e=>{const t=[];for(const n in e)t.push(n.replace(On,Mn),":",e[n],";");return t.join("")},Tn=e=>e,Nn=(e,t,n)=>{const r=e.ownerDocument.createRange();r.setStartBefore(t),r.setEndAfter(n),r.deleteContents()};var An=(e,t,n,r,i)=>{const o=r||Tn,a=null==i?null:o(i,0);let s=0,c=0,u=t.length-1,l=t[0],d=t[u],h=n.length-1,f=n[0],p=n[h];for(;s<=u&&c<=h;)if(null==l)l=t[++s];else if(null==d)d=t[--u];else if(null==f)f=n[++c];else if(null==p)p=n[--h];else if(l==f)l=t[++s],f=n[++c];else if(d==p)d=t[--u],p=n[--h];else if(l==p)e.insertBefore(o(l,1),o(d,-0).nextSibling),l=t[++s],p=n[--h];else if(d==f)e.insertBefore(o(d,1),o(l,0)),d=t[--u],f=n[++c];else{let r=t.indexOf(f);if(r<0)e.insertBefore(o(f,1),o(l,0)),f=n[++c];else{let i=r,a=c;for(;i<=u&&a<=h&&t[i]===n[a];)i++,a++;if(1<i-r)--r===s?e.removeChild(o(l,-1)):Nn(e,o(l,-1),o(t[r],-1)),s=i,c=a,l=t[i],f=n[a];else{const i=t[r];t[r]=null,e.insertBefore(o(i,1),o(l,0)),f=n[++c]}}}if(s<=u||c<=h)if(s>u){const t=n[h+1],r=null==t?a:o(t,0);if(c===h)e.insertBefore(o(n[c],1),r);else{const t=e.ownerDocument.createDocumentFragment();for(;c<=h;)t.appendChild(o(n[c++],1));e.insertBefore(t,r)}}else null==t[s]&&s++,s===u?e.removeChild(o(t[s],-1)):Nn(e,o(t[s],-1),o(t[u],-1));return n};const Pn=new It;function Dn(){}Dn.prototype=Object.create(null);const jn=e=>({html:e}),In=(e,t)=>"ELEMENT_NODE"in e?e:e.constructor===wn?1/t<0?t?e.remove():e.last:t?e.insert():e.first:In(e.render(),t),Ln=(e,t,n)=>{const r=e.childNodes,i=r.length;for(let o=0;o<i;o++){let i=r[o];switch(i.nodeType){case xt:$n(i,t,n),Ln(i,t,n);break;case 8:i.textContent===Tt&&(n.shift(),t.push(kt.test(e.nodeName)?_n("text",e):_n("any",i)));break;case 3:kt.test(e.nodeName)&&$t.call(i.textContent)===Nt&&(n.shift(),t.push(_n("text",e)))}}},$n=(e,t,n)=>{const r=new Dn,i=e.attributes,o=mn.call(i),a=[],s=o.length;for(let e=0;e<s;e++){const s=o[e];if(s.value===Tt){const e=s.name;if(!(e in r)){const o=n.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)=['"]?$/,"$1");r[e]=i[o]||i[o.toLowerCase()],t.push(_n("attr",r[e],o))}a.push(s)}}const c=a.length;for(let t=0;t<c;t++){const n=a[t];/^id$/i.test(n.name)?e.removeAttribute(n.name):e.removeAttributeNode(a[t])}const u=e.nodeName;if(/^script$/i.test(u)){const t=document.createElement(u);for(let e=0;e<i.length;e++)t.setAttributeNode(i[e].cloneNode(!0));t.textContent=e.textContent,e.parentNode.replaceChild(t,e)}},Bn=(e,t)=>{t(e.placeholder),"text"in e?Promise.resolve(e.text).then(String).then(t):"any"in e?Promise.resolve(e.any).then(t):"html"in e?Promise.resolve(e.html).then(jn).then(t):Promise.resolve(Wt(e,t)).then(t)},Rn=e=>null!=e&&"then"in e,qn=(e,t)=>{let n,r=!1;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":r?n!==o&&(n=o,t[0].textContent=o):(r=!0,n=o,t=An(e.parentNode,t,[Yt(e,o)],In,e));break;case"object":case"undefined":if(null==o){r=!1,t=An(e.parentNode,t,[],In,e);break}default:if(r=!1,n=o,Lt(o))if(0===o.length)t.length&&(t=An(e.parentNode,t,[],In,e));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(Lt(o[0])&&(o=o.concat.apply([],o)),Rn(o[0])){Promise.all(o).then(i);break}default:t=An(e.parentNode,t,o,In,e)}else(e=>"ELEMENT_NODE"in e||e instanceof wn||e instanceof Bt)(o)?t=An(e.parentNode,t,11===o.nodeType?mn.call(o.childNodes):[o],In,e):Rn(o)?o.then(i):"placeholder"in o?Bn(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?t=An(e.parentNode,t,mn.call(hn(e,[].concat(o.html).join("")).childNodes),In,e):i("length"in o?mn.call(o):Wt(o,i))}};return i},Fn=(e,t,n)=>{const r="ownerSVGElement"in e;let i;if("style"===t)return((e,t,n)=>{if(n){const r=t.cloneNode(!0);return r.value="",e.setAttributeNode(r),Cn(r,n)}return Cn(e.style,n)})(e,n,r);if(/^on/.test(t)){let n=t.slice(2);return n===Ot||n===Mt?(Vn&&(Vn=!1,function(){const e=(e,n)=>{const r=new At(n),i=e.length;for(let n=0;n<i;n++){let i=e[n];i.nodeType===xt&&t(i,r)}},t=(e,n)=>{Pn.has(e)&&e.dispatchEvent(n);const r=e.children,i=r.length;for(let e=0;e<i;e++)t(r[e],n)};try{new MutationObserver(t=>{const n=t.length;for(let r=0;r<n;r++){let n=t[r];e(n.removedNodes,Mt),e(n.addedNodes,Ot)}}).observe(document,{subtree:!0,childList:!0})}catch(t){document.addEventListener("DOMNodeRemoved",t=>{e([t.target],Mt)},!1),document.addEventListener("DOMNodeInserted",t=>{e([t.target],Ot)},!1)}}()),Pn.add(e)):t.toLowerCase()in e&&(n=n.toLowerCase()),t=>{i!==t&&(i&&e.removeEventListener(n,i,!1),i=t,t&&e.addEventListener(n,t,!1))}}if("data"===t||!r&&t in e)return n=>{i!==n&&(i=n,e[t]!==n&&(e[t]=n,null==n&&e.removeAttribute(t)))};{let t=!1;const r=n.cloneNode(!0);return n=>{i!==n&&(i=n,r.value!==n&&(null==n?(t&&(t=!1,e.removeAttributeNode(r)),r.value=n):(r.value=n,t||(t=!0,e.setAttributeNode(r)))))}}},Un=e=>{let t;const n=r=>{t!==r&&(t=r,"object"==typeof r&&r?Rn(r)?r.then(n):"placeholder"in r?Bn(r,n):n("text"in r?String(r.text):"any"in r?r.any:"html"in r?[].concat(r.html).join(""):"length"in r?mn.call(r).join(""):Wt(r,n)):e.textContent=null==r?"":r)};return n};var Kn={create:(e,t)=>{const n=[],r=t.length;for(let i=0;i<r;i++){const r=t[i],o=xn(e,r.path);switch(r.type){case"any":n.push(qn(o,[]));break;case"attr":n.push(Fn(o,r.name,r.node));break;case"text":n.push(Un(o)),o.textContent=""}}return n},find:Ln};let Vn=!0;const Wn=new jt,Gn=new Pt;function zn(){const e=arguments.length;for(let t=1;t<e;t++)this[t-1](arguments[t])}const Hn=tn,Yn=(e,t,n)=>St.test(t)?e:"<"+t+n+"></"+t+">";var Zn=function(e){const t=Wn.get(this);return t&&t.template===gn(e)?zn.apply(t.updates,arguments):function(e){e=gn(e);const t=Gn.get(e)||function(e){const t=[],n=e.join(Nt).replace(Hn,Yn),r=hn(this,n);Kn.find(r,t,e.slice());const i={fragment:r,paths:t};return Gn.set(e,i),i}.call(this,e),n=pn(this.ownerDocument,t.fragment),r=Kn.create(n,t.paths);Wn.set(this,{template:e,updates:r}),zn.apply(r,arguments),this.textContent="",this.appendChild(n)}.apply(this,arguments),this};const Jn=new jt,Qn=e=>{let t,n,r,i,o;return function(a){a=gn(a);let s=i!==a;return s&&(i=a,r=Ht(document),n="svg"===e?document.createElementNS(Ct,"svg"):r,o=Zn.bind(n)),o.apply(null,arguments),s&&("svg"===e&&cn(r,mn.call(n.childNodes)),t=er(r)),t}},Xn=(e,t)=>{const n=t.indexOf(":");let r=Jn.get(e),i=t;return-1<n&&(i=t.slice(n+1),t=t.slice(0,n)||"html"),r||Jn.set(e,r={}),r[i]||(r[i]=Qn(t))},er=e=>{const t=e.childNodes,n=t.length,r=[];for(let e=0;e<n;e++){let n=t[e];n.nodeType!==xt&&0===$t.call(n.textContent).length||r.push(n)}return 1===r.length?r[0]:new wn(r)};var tr=(e,t)=>null==e?Qn(t||"html"):Xn(e,t||"html");
/*! (c) Andrea Giammarchi (ISC) */const nr=e=>Zn.bind(e),rr=Vt;function ir(e){return arguments.length<2?null==e?Qn("html"):"string"==typeof e?ir.wire(null,e):"raw"in e?Qn("html")(e):"nodeType"in e?ir.bind(e):Xn(e,"html"):("raw"in e?Qn("html"):ir.wire).apply(null,arguments)}ir.Component=Bt,ir.bind=nr,ir.define=rr,ir.diff=An,ir.hyper=ir,ir.wire=tr,function(e){const t=new jt,n=Object.create,r=(e,t)=>{const n={w:null,p:null};return t.set(e,n),n};Object.defineProperties(Bt,{for:{configurable:!0,value(e,i){return((e,t,i,o)=>{const a=t.get(e)||r(e,t);switch(typeof o){case"object":case"function":const t=a.w||(a.w=new jt);return t.get(o)||((e,t,n)=>(e.set(t,n),n))(t,o,new e(i));default:const r=a.p||(a.p=n(null));return r[o]||(r[o]=new e(i))}})(this,t.get(e)||(e=>{const n=new Pt;return t.set(e,n),n})(e),e,null==i?"default":i)}}}),Object.defineProperties(Bt.prototype,{handleEvent:{value(e){const t=e.currentTarget;this["getAttribute"in t&&t.getAttribute("data-call")||"on"+e.type](e)}},html:Rt("html",e),svg:Rt("svg",e),state:Rt("state",function(){return this.defaultState}),defaultState:{get:()=>({})},setState:{value(e,t){const n=this.state,r="function"==typeof e?e.call(this,n):e;for(const e in r)n[e]=r[e];return!1!==t&&this.render(),this}}})}(Qn);const or=new WeakMap;function ar(e){return Array.from(e).map(e=>`<option value="${e}">${e}</option>`)}const sr=new WeakMap;class cr extends Ve{constructor(e,t,n,r=!1){super(t,n);const i=sr.set(this,new Map).get(this);i.set("id",String(e)),i.set("selected",Boolean(r))}get id(){return sr.get(this).get("id")}get selected(){return sr.get(this).get("selected")}set selected(e){return sr.get(this).set("selected",Boolean(e))}toObject(){return Object.assign(super.toObject(),{id:this.id,selected:this.selected})}}const ur=new WeakMap;function lr(){return{total:{label:"Total",amount:{value:String(Math.random()).substring(3,8),currency:"usd"}}}}const dr=new WeakMap;function hr(e){return Object(i["wire"])(e)`
  <dt>
    <input
      type="radio"
      name="shipping"
      id="${"shipping_option_"+e.id}"
      value="${e.id}"
      checked="${e.selected}">
    <label for="${"shipping_option_"+e.id}">
      ${e.label}
    </label>
  </dt>
  <dd>
    ${e.amount}
  </dd>
  `}const fr=new WeakMap;class pr extends EventTarget{constructor(){super();const e=fr.set(this,new Map).get(this),t=document.createElement("section");e.set("containerElem",t),e.set("renderer",Object(i.bind)(t))}render(e){const t=fr.get(this).get("renderer");return t`<dl class="line-items">${e.map(mr).reduce((e,t)=>e.concat(t),[])}</dl>`}get containerElem(){return fr.get(this).get("containerElem")}}function mr(e){const{currency:t,value:n}=e.amount,r=new Intl.NumberFormat(navigator.languages,{style:"currency",currency:t,currencyDisplay:"symbol"});return Object(i["wire"])(e)`
    <dt>
      ${e.label}
    </dt>
    <dd>
      ${r.format(n)}
    </dd>
  `}const gr=new WeakMap;const yr=new WeakMap;window.addEventListener("DOMContentLoaded",async()=>{const e=window.location.pathname.endsWith("headphone.html")?"headphones":"inventory",t=new class extends EventTarget{constructor(e,t){super();const n=or.set(this,new Map).get(this),r=document.createElement("table");e.appendChild(r),n.set("table",r),function(e){e.innerHTML='\n  <table class="inventory-table">\n    <thead>\n      <tr>\n        <th colspan="2">Product Details</th>\n        <th>Quantity</th>\n        <th>Price</th>\n        <th>Total</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  '}(r);const i=r.querySelector("tbody");n.set("renderer",nr(i));const o=Promise.resolve(t?this.fill(t):void 0);n.set("ready",o),i.addEventListener("change",e=>{e.stopPropagation(),this.dispatchEvent(new CustomEvent("change"))})}get ready(){return or.get(this).get("ready")}async fill(e){const t=await fetch(e).then(e=>e.json());this.render(t)}render(e){const t={onChange(){const{selectElem:e,renderer:t}=n.find(({selectElem:e})=>this===e);if(!e)return;const r=e.closest("tr"),i=parseInt(r.querySelector(".price").textContent,10);t`${parseInt(e.item(e.selectedIndex).value,10)*i}`}};!function(e,t,n){e`${t.map(e=>tr()`<tr class="lineItem" data-ref="${e.ref}">${function(e,{onChange:t}){const{img:n,price:r,label:i,sizes:o,ref:a,colors:s}=e;return tr(e)`
    <td>
      <img src="${n}" alt="">
    </td>
    <td>
      <h3 class="itemLabel">${i} working?</h3>
      <p>Ref. ${a}</p>
      <p class="itemSizes">Size: <select name="sizes" class="sizeSelector">${ar(o)}</select></p>
      <p>Colors: ${s}</p>
    </td>
    <td>
      <select name="itemCount" class="itemsSelector" onchange="${t}">${ar(function(e,t){const n=[];for(;e<=t;)n.push(e++);return n}(1,10))}</select>
    </td>
    <td>$<span class="price">${r}</span></td>
    <td class="itemSum">$<output>${r}</output></td>
  `}(e,n)}</tr>`)}`}(or.get(this).get("renderer"),e,t);var n=Array.from(document.querySelectorAll(".itemSum>output")).map(e=>({elem:e,renderer:nr(e),selectElem:e.closest("tr").querySelector("select.itemsSelector")}))}get containerElem(){return or.get(this).get("containerElem")}get displayItems(){const e=or.get(this).get("table");return Array.from(e.querySelectorAll(".lineItem")).map(e=>{const t=e.querySelector(".itemSum>output").textContent,n=new re("USD",t),r=e.querySelector(".itemLabel").textContent,i=e.querySelector(".itemsSelector"),o=i.item(i.selectedIndex).value;return new Ge(`${r} x${o}`,n)})}}(document.getElementById("inventory-table"),`data/${e}.json`);await t.ready;const n=new class extends EventTarget{constructor(e=[]){super();const t=document.createElement("section"),n=dr.set(this,new Map).get(this);for(const t of e)if(!(t instanceof cr))throw new TypeError("Expected instance of PaymentShippingOption");n.set("containerElem",t),n.set("renderer",Object(i.bind)(t)),n.set("shippingOptions",e),this.render(e)}get containerElem(){return dr.get(this).get("containerElem")}render(){const e=dr.get(this),t=e.get("renderer");return t`
      <dl class="shipping-options" onchange="${e=>{e.stopPropagation();for(const t of dr.get(this).get("shippingOptions"))t.selected=t.id===e.target.value;this.dispatchEvent(new CustomEvent("change"))}}">${e.get("shippingOptions").map(hr).reduce((e,t)=>e.concat(t),[])}</dl>
    `}get selected(){return dr.get(this).get("shippingOptions").find(e=>e.selected)}get displayItems(){return dr.get(this).get("shippingOptions")}}((await fetch(`data/${e}_shipping.json`).then(e=>e.json())).map(({id:e,label:t,value:n,selected:r})=>{const i=re.parseAmount(n);return new cr(e,t,i,r)})),r=new class extends pr{constructor(e=.1,t=[],n="USD"){super(t);const r=gr.set(this,new Map).get(this);this.containerElem.classList.add("tax-line"),r.set("taxPercent",e),r.set("defaultCurrency",n),r.set("sections",new Set(t));const i=this.render.bind(this);t.forEach(e=>e.addEventListener("change",i)),this.render()}get displayItems(){const e=gr.get(this),t=e.get("defaultCurrency"),n=e.get("sections"),r=e.get("taxPercent"),i=Array.from(n).map(e=>e.displayItems).reduce((e,t)=>e.concat(t),[]).map(e=>parseInt(e.amount.value,10)).reduce((e,t)=>e+t,0),o=new re(t,i*r);return[new Ge("Tax",o)]}render(){const e=super.render(this.displayItems);return this.dispatchEvent(new CustomEvent("change")),e}}(.1,[n,t],"USD");new class{constructor(e,t=[],n="USD"){const r=ur.set(this,new Map).get(this);r.set("sections",t),r.set("renderer",Object(i.bind)(e)),r.set("defaultCurrency",n),t.forEach(e=>e.addEventListener("change",this.render.bind(this))),this.render()}sumTotal(){const e=ur.get(this).get("sections"),t=Array.from(e).map(e=>e.displayItems).reduce((e,t)=>e.concat(t),[]).map(({amount:{value:e}})=>parseInt(e,10)).reduce((e,t)=>e+t,0),n=ur.get(this).get("defaultCurrency"),r=new re(n,t);return new Ge("Total",r)}render(){const e=ur.get(this),t=e.get("renderer"),n=e.get("sections"),r=async function(){const e=ur.get(this).get("sections"),t=(s=(e=>e instanceof cr),(e={left:[],right:[]},t)=>{const{left:n,right:r}=e,i=s(t)?n:r;return i.push(t),e}),{left:n,right:r}=Array.from(e).map(e=>e.displayItems).reduce((e,t)=>e.concat(t),[]).reduce(t,void 0),i=this.sumTotal(),o={id:`super-store-order-${String(Math.random()).substr(2)}`,displayItems:r.map(e=>e.toObject()),total:i.toObject(),shippingOptions:n.map(e=>e.toObject())},a=new PaymentRequest([{supportedMethods:["basic-card"]}],o,{requestShipping:!0,requestPayerName:!0,requestPayerPhone:!0});var s;a.addEventListener("shippingoptionchange",async e=>{console.log("hmmm.... onshippingoptionchange",e);const t=new Promise(e=>{const t=lr();setTimeout(()=>{e(t)},100)});e.updateWith(t)}),a.onshippingaddresschange=(e=>{console.log("hmmm.... onshippingaddresschange",e)});try{const e=lr(),t=new Promise(t=>{setTimeout(()=>{t(e)},2e3)}),n=a.show(t),r=await n;await async function(e){e.addEventListener("payerdetailchange",e=>{const t=lr();console.log(t),e.updateWith(t)}),console.log(e),await e.retry({}),await e.retry({}),console.log(e),setTimeout(async()=>{await e.complete("success"),document.querySelectorAll(".main-stuff").forEach(e=>e.setAttribute("hidden",!0)),document.querySelector("#payment-complete").removeAttribute("hidden")},2e3)}(r)}catch(e){console.error(e)}return!1}.bind(this),{amount:{value:i,currency:o}}=this.sumTotal(),a=new Intl.NumberFormat("en-us",{style:"currency",currency:o,currencyDisplay:"symbol"});return t`
      <h3>Order summary</h3>
      <section>${n.map(e=>e.containerElem)}</section>
      <section>
        <dl class="order-summary-total">
          <dt>Total</dt>
          <dd>${a.format(i)}</dd>
        </dl>
      </section>
      <div id="button-container">
        <button id="checkout-button" onclick="${r}">Checkout</button>
      </div>
    `}}(document.getElementById("order-summary"),[new class extends pr{constructor(e){super(),yr.set(this,new Map).get(this).set("inventoryTable",e);const t=()=>this.render();e.addEventListener("change",t),t()}get displayItems(){return yr.get(this).get("inventoryTable").displayItems}render(){return super.render(this.displayItems)}}(t),n,r])})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},h.clearImmediate=f}function f(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(19))},function(e,t,n){var r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(20),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,u=0,l=[],d=n(24);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),p(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;n=c||(c=g(t)),r=E.bind(null,n,a,!1),i=E.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),p(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&h(f(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function E(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){(e.exports=n(26)(!1)).push([e.i,"dialog{position:absolute;left:0;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border:solid;padding:1em;background:#fff;color:#000;display:block}dialog:not([open]){display:none}dialog+.backdrop{background:rgba(0,0,0,.1)}._dialog_overlay,dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0}dialog.fixed{position:fixed;top:50%;transform:translateY(-50%)}",""])},function(e,t,n){var r=n(27);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(25)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";const r=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;Object.defineProperty(t,"__esModule",{value:!0}).default=((e,t,n)=>{if(n){const r=t.cloneNode(!0);return r.value="",e.setAttributeNode(r),i(r,n)}return i(e.style,n)});const i=(e,t)=>{let n,i;return o=>{switch(typeof o){case"object":if(o){if("object"===n){if(!t&&i!==o)for(const t in i)t in o||(e[t]="")}else t?e.value="":e.cssText="";const a=t?{}:e;for(const e in o){const t=o[e];a[e]="number"!=typeof t||r.test(e)?t:t+"px"}n="object",t?e.value=s(i=a):i=o;break}default:i!=o&&(n="string",i=o,t?e.value=o||"":e.cssText=o||"")}}},o=/([^A-Z])([A-Z]+)/g,a=(e,t,n)=>t+"-"+n.toLowerCase(),s=e=>{const t=[];for(const n in e)t.push(n.replace(o,a),":",e[n],";");return t.join("")}},function(e,t,n){"use strict";const{COMMENT_NODE:r,DOCUMENT_FRAGMENT_NODE:i,ELEMENT_NODE:o}=n(2),a=(e,t,n)=>{e.unshift(e.indexOf.call(t.childNodes,n))};Object.defineProperty(t,"__esModule",{value:!0}).default={create:(e,t,n)=>({type:e,name:n,node:t,path:(e=>{const t=[];let n;switch(e.nodeType){case o:case i:n=e;break;case r:n=e.parentNode,a(t,n,e);break;default:n=e.ownerElement}for(e=n;n=n.parentNode;e=n)a(t,n,e);return t})(t)}),find:(e,t)=>{const n=t.length;for(let r=0;r<n;r++)e=e.childNodes[t[r]];return e}}},function(e,t,n){"use strict";const{CONNECTED:r,DISCONNECTED:i,COMMENT_NODE:o,DOCUMENT_FRAGMENT_NODE:a,ELEMENT_NODE:s,TEXT_NODE:c,OWNER_SVG_ELEMENT:u,SHOULD_USE_TEXT_CONTENT:l,UID:d,UIDC:h}=n(2),f=(e=>e.__esModule?e.default:e)(n(6)),p=(e=>e.__esModule?e.default:e)(n(11)),m=(e=>e.__esModule?e.default:e)(n(30)),g=(e=>e.__esModule?e.default:e)(n(29)),y=(e=>e.__esModule?e.default:e)(n(14)),v=(e=>e.__esModule?e.default:e)(n(9)),{text:b}=n(3),{Event:w,WeakSet:E,isArray:_,trim:x}=n(5),{createFragment:S,slice:C}=n(4),O=new E;function M(){}M.prototype=Object.create(null);const k=e=>({html:e}),T=(e,t)=>"ELEMENT_NODE"in e?e:e.constructor===p?1/t<0?t?e.remove():e.last:t?e.insert():e.first:T(e.render(),t),N=(e,t,n)=>{const r=e.childNodes,i=r.length;for(let a=0;a<i;a++){let i=r[a];switch(i.nodeType){case s:A(i,t,n),N(i,t,n);break;case o:i.textContent===d&&(n.shift(),t.push(l.test(e.nodeName)?m.create("text",e):m.create("any",i)));break;case c:l.test(e.nodeName)&&x.call(i.textContent)===h&&(n.shift(),t.push(m.create("text",e)))}}},A=(e,t,n)=>{const r=new M,i=e.attributes,o=C.call(i),a=[],s=o.length;for(let e=0;e<s;e++){const s=o[e];if(s.value===d){const e=s.name;if(!(e in r)){const o=n.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)=['"]?$/,"$1");r[e]=i[o]||i[o.toLowerCase()],t.push(m.create("attr",r[e],o))}a.push(s)}}const c=a.length;for(let t=0;t<c;t++){const n=a[t];/^id$/i.test(n.name)?e.removeAttribute(n.name):e.removeAttributeNode(a[t])}const u=e.nodeName;if(/^script$/i.test(u)){const t=document.createElement(u);for(let e=0;e<i.length;e++)t.setAttributeNode(i[e].cloneNode(!0));t.textContent=e.textContent,e.parentNode.replaceChild(t,e)}},P=(e,t)=>{t(e.placeholder),"text"in e?Promise.resolve(e.text).then(String).then(t):"any"in e?Promise.resolve(e.any).then(t):"html"in e?Promise.resolve(e.html).then(k).then(t):Promise.resolve(y.invoke(e,t)).then(t)},D=e=>null!=e&&"then"in e,j=(e,t)=>{let n,r=!1;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":r?n!==o&&(n=o,t[0].textContent=o):(r=!0,n=o,t=v(e.parentNode,t,[b(e,o)],T,e));break;case"object":case"undefined":if(null==o){r=!1,t=v(e.parentNode,t,[],T,e);break}default:if(r=!1,n=o,_(o))if(0===o.length)t.length&&(t=v(e.parentNode,t,[],T,e));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(_(o[0])&&(o=o.concat.apply([],o)),D(o[0])){Promise.all(o).then(i);break}default:t=v(e.parentNode,t,o,T,e)}else(e=>"ELEMENT_NODE"in e||e instanceof p||e instanceof f)(o)?t=v(e.parentNode,t,o.nodeType===a?C.call(o.childNodes):[o],T,e):D(o)?o.then(i):"placeholder"in o?P(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?t=v(e.parentNode,t,C.call(S(e,[].concat(o.html).join("")).childNodes),T,e):i("length"in o?C.call(o):y.invoke(o,i))}};return i},I=(e,t,n)=>{const o=u in e;let a;if("style"===t)return g(e,n,o);if(/^on/.test(t)){let n=t.slice(2);return n===r||n===i?($&&($=!1,function(){const e=(e,n)=>{const r=new w(n),i=e.length;for(let n=0;n<i;n++){let i=e[n];i.nodeType===s&&t(i,r)}},t=(e,n)=>{O.has(e)&&e.dispatchEvent(n);const r=e.children,i=r.length;for(let e=0;e<i;e++)t(r[e],n)};try{new MutationObserver(t=>{const n=t.length;for(let o=0;o<n;o++){let n=t[o];e(n.removedNodes,i),e(n.addedNodes,r)}}).observe(document,{subtree:!0,childList:!0})}catch(t){document.addEventListener("DOMNodeRemoved",t=>{e([t.target],i)},!1),document.addEventListener("DOMNodeInserted",t=>{e([t.target],r)},!1)}}()),O.add(e)):t.toLowerCase()in e&&(n=n.toLowerCase()),t=>{a!==t&&(a&&e.removeEventListener(n,a,!1),a=t,t&&e.addEventListener(n,t,!1))}}if("data"===t||!o&&t in e)return n=>{a!==n&&(a=n,e[t]!==n&&(e[t]=n,null==n&&e.removeAttribute(t)))};{let t=!1;const r=n.cloneNode(!0);return n=>{a!==n&&(a=n,r.value!==n&&(null==n?(t&&(t=!1,e.removeAttributeNode(r)),r.value=n):(r.value=n,t||(t=!0,e.setAttributeNode(r)))))}}},L=e=>{let t;const n=r=>{t!==r&&(t=r,"object"==typeof r&&r?D(r)?r.then(n):"placeholder"in r?P(r,n):n("text"in r?String(r.text):"any"in r?r.any:"html"in r?[].concat(r.html).join(""):"length"in r?C.call(r).join(""):y.invoke(r,n)):e.textContent=null==r?"":r)};return n};Object.defineProperty(t,"__esModule",{value:!0}).default={create:(e,t)=>{const n=[],r=t.length;for(let i=0;i<r;i++){const r=t[i],o=m.find(e,r.path);switch(r.type){case"any":n.push(j(o,[]));break;case"attr":n.push(I(o,r.name,r.node));break;case"text":n.push(L(o)),o.textContent=""}}return n},find:N};let $=!0},function(e,t,n){"use strict";const{create:r,fragment:i,text:o}=n(3),a=i(document),s="append"in a;t.hasAppend=s;const c="content"in r(document,"template");t.hasContent=c,a.appendChild(o(a,"g")),a.appendChild(o(a,""));const u=1===a.cloneNode(!0).childNodes.length;t.hasDoomedCloneNode=u;const l="importNode"in document;t.hasImportNode=l},function(e,t,n){e.exports=n(17)}]);
//# sourceMappingURL=bundle.js.map